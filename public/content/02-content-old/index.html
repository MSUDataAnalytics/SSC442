<!DOCTYPE html>
<html lang="en-us" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Ben Bushong">

  
  
  
    
  
  <meta name="description" content="ReadingsGuiding QuestionsVisualizing data distributionsVariable typesCase study: describing student heightsDistribution functionCumulative distribution functionsHistogramsSmoothed densityInterpreting the y-axisDensities permit stratificationThe normal distributionStandard unitsQuantile-quantile plotsPercentilesBoxplotsStratificationCase study: describing student heights (continued)ggplot2 geometriesBarplotsHistogramsDensity plotsBoxplotsQQ-plotsData visualization principlesEncoding data using visual cuesKnow when to include 0Do not distort quantitiesOrder categories by a meaningful valueShow the dataEase comparisonsUse common axesAlign plots vertically to see horizontal changes and horizontally to see vertical changesConsider transformationsVisual cues to be compared should be adjacentUse colorThink of the color blindPlots for two variablesSlope chartsBland-Altman plotEncoding a third variableAvoid pseudo-three-dimensional plotsAvoid too many significant digitsKnow your audienceReadingsThis page.">

  
  <link rel="alternate" hreflang="en-us" href="https://datavizm20.classes.andrewheiss.com/content/02-content-old/">

  


  
  
  
  <meta name="theme-color" content="#18453B">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:400,400i,700,700i%7COverpass:400,400i,700,700i&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="https://datavizm20.classes.andrewheiss.com/content/02-content-old/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="og:site_name" content="Data Analytics">
  <meta property="og:url" content="https://datavizm20.classes.andrewheiss.com/content/02-content-old/">
  <meta property="og:title" content="Effective Visualizations | Data Analytics">
  <meta property="og:description" content="ReadingsGuiding QuestionsVisualizing data distributionsVariable typesCase study: describing student heightsDistribution functionCumulative distribution functionsHistogramsSmoothed densityInterpreting the y-axisDensities permit stratificationThe normal distributionStandard unitsQuantile-quantile plotsPercentilesBoxplotsStratificationCase study: describing student heights (continued)ggplot2 geometriesBarplotsHistogramsDensity plotsBoxplotsQQ-plotsData visualization principlesEncoding data using visual cuesKnow when to include 0Do not distort quantitiesOrder categories by a meaningful valueShow the dataEase comparisonsUse common axesAlign plots vertically to see horizontal changes and horizontally to see vertical changesConsider transformationsVisual cues to be compared should be adjacentUse colorThink of the color blindPlots for two variablesSlope chartsBland-Altman plotEncoding a third variableAvoid pseudo-three-dimensional plotsAvoid too many significant digitsKnow your audienceReadingsThis page."><meta property="og:image" content="https://datavizm20.classes.andrewheiss.com/img/social-image.png">
  <meta property="twitter:image" content="https://datavizm20.classes.andrewheiss.com/img/social-image.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2021-01-19T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2021-08-20T09:52:12-04:00">
  

  



  


  


  <link rel="shortcut icon" href="https://datavizm20.classes.andrewheiss.com/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="https://datavizm20.classes.andrewheiss.com/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="https://datavizm20.classes.andrewheiss.com/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="https://datavizm20.classes.andrewheiss.com/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://datavizm20.classes.andrewheiss.com/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="https://datavizm20.classes.andrewheiss.com/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="https://datavizm20.classes.andrewheiss.com/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="https://datavizm20.classes.andrewheiss.com/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="https://datavizm20.classes.andrewheiss.com/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="SSC 442: Data Analytics" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="https://datavizm20.classes.andrewheiss.com/img/mstile-144x144.png" />


  <title>Effective Visualizations | Data Analytics</title>

</head>


<body id="top" data-spy="scroll" data-offset="70"
    data-target="#TableOfContents"
    >

    <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


    







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Data Analytics</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Data Analytics</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/content/"><span>Content</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/example/"><span>Examples</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/assignment/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://join.slack.com/t/ssc442kirkpatrick/shared_invite/zt-kxhgemgn-vaEGD_4KcpDCOEJtXxbxbQ" target="_blank" rel="noopener"><span><i class="fab fa-slack"></i></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


    

<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
            





  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/content/">Readings, lectures, and videos</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/content/00-content/">Course content</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/content/00-content/">0: Introduction to R</a>
      </li>
      
      <li >
        <a href="/content/01-content/">1: The Tidyverse</a>
      </li>
      
      <li class="active">
        <a href="/content/02-content-old/">2: Visualization</a>
      </li>
      
      <li >
        <a href="/content/02-content-new/">2: Visualization Revised</a>
      </li>
      
      <li >
        <a href="/content/03-content-old/">3: Visualization II</a>
      </li>
      
      <li >
        <a href="/content/03-content-new/">3: Visualization II revised</a>
      </li>
      
      <li >
        <a href="/content/04-content/">4: Uncertainty</a>
      </li>
      
      <li >
        <a href="/content/05-content/">5: Linear Regression I</a>
      </li>
      
      <li >
        <a href="/content/06-content/">6: Linear Regression II</a>
      </li>
      
      <li >
        <a href="/content/07-content/">7: Linear Regression III</a>
      </li>
      
      <li >
        <a href="/content/08-content/">8: Nonparametric Regression</a>
      </li>
      
      <li >
        <a href="/content/09-content/">9: Bias vs. Variance</a>
      </li>
      
      <li >
        <a href="/content/10-content/">10: Classification</a>
      </li>
      
      <li >
        <a href="/content/11-content/">11: Data Wrangling</a>
      </li>
      
      <li >
        <a href="/content/12-content/">12: Text as Data</a>
      </li>
      
      <li >
        <a href="/content/13-content/">13: Geospatial with R</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

        </div>

        

        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

            <article class="article">

                <div class="docs-article-container">
                    <h1>Effective Visualizations</h1>

                    

                    
                    <div class="due-date p-2 mb-3 bg-content text-white">
                        Content for Tuesday, February 2, 2021
                    </div>
                    

                    

                    <div class="article-style">
                        
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />

<div id="TOC">
<ul>
<li><a href="#readings">Readings</a><ul>
<li><a href="#guiding-questions">Guiding Questions</a></li>
</ul></li>
<li><a href="#distributions">Visualizing data distributions</a><ul>
<li><a href="#variable-types">Variable types</a></li>
<li><a href="#case-study-describing-student-heights">Case study: describing student heights</a></li>
<li><a href="#distribution-function">Distribution function</a></li>
<li><a href="#cdf-intro">Cumulative distribution functions</a></li>
<li><a href="#histograms">Histograms</a></li>
<li><a href="#smoothed-density">Smoothed density</a><ul>
<li><a href="#interpreting-the-y-axis">Interpreting the y-axis</a></li>
<li><a href="#densities-permit-stratification">Densities permit stratification</a></li>
</ul></li>
<li><a href="#normal-distribution">The normal distribution</a></li>
<li><a href="#standard-units">Standard units</a></li>
<li><a href="#quantile-quantile-plots">Quantile-quantile plots</a></li>
<li><a href="#percentiles">Percentiles</a></li>
<li><a href="#boxplots">Boxplots</a></li>
<li><a href="#stratification">Stratification</a></li>
<li><a href="#student-height-cont">Case study: describing student heights (continued)</a></li>
<li><a href="#other-geometries">ggplot2 geometries</a><ul>
<li><a href="#barplots">Barplots</a></li>
<li><a href="#histograms-1">Histograms</a></li>
<li><a href="#density-plots">Density plots</a></li>
<li><a href="#boxplots-1">Boxplots</a></li>
<li><a href="#qq-plots">QQ-plots</a></li>
</ul></li>
</ul></li>
<li><a href="#data-visualization-principles">Data visualization principles</a><ul>
<li><a href="#encoding-data-using-visual-cues">Encoding data using visual cues</a></li>
<li><a href="#know-when-to-include-0">Know when to include 0</a></li>
<li><a href="#do-not-distort-quantities">Do not distort quantities</a></li>
<li><a href="#order-categories-by-a-meaningful-value">Order categories by a meaningful value</a></li>
<li><a href="#show-the-data">Show the data</a></li>
<li><a href="#ease-comparisons">Ease comparisons</a><ul>
<li><a href="#use-common-axes">Use common axes</a></li>
<li><a href="#align-plots-vertically-to-see-horizontal-changes-and-horizontally-to-see-vertical-changes">Align plots vertically to see horizontal changes and horizontally to see vertical changes</a></li>
<li><a href="#consider-transformations">Consider transformations</a></li>
<li><a href="#visual-cues-to-be-compared-should-be-adjacent">Visual cues to be compared should be adjacent</a></li>
<li><a href="#use-color">Use color</a></li>
</ul></li>
<li><a href="#think-of-the-color-blind">Think of the color blind</a></li>
<li><a href="#plots-for-two-variables">Plots for two variables</a><ul>
<li><a href="#slope-charts">Slope charts</a></li>
<li><a href="#bland-altman-plot">Bland-Altman plot</a></li>
</ul></li>
<li><a href="#encoding-a-third-variable">Encoding a third variable</a></li>
<li><a href="#avoid-pseudo-three-dimensional-plots">Avoid pseudo-three-dimensional plots</a></li>
<li><a href="#avoid-too-many-significant-digits">Avoid too many significant digits</a></li>
<li><a href="#know-your-audience">Know your audience</a></li>
</ul></li>
</ul>
</div>

<div id="readings" class="section level2">
<h2>Readings</h2>
<ul>
<li>This page.</li>
</ul>
<div id="guiding-questions" class="section level3">
<h3>Guiding Questions</h3>
<ul>
<li>Why do we create visualizations? What types of data are best suited for visuals?</li>
<li>How do we best visualize the variability in our data?</li>
<li>What makes a visual compelling?</li>
<li>What are the worst visuals? Which of these are most frequently used? Why?</li>
</ul>
<p>As with last week’s content, the technical aspects of this lecture will be explored in greater detail in the Thursday practical lecture. Today, we will focus on some principles.</p>
<blockquote>
<p>“The greatest value of a picture is when it forces us to notice what we never expected to see.” – John Tukey</p>
</blockquote>
</div>
</div>
<div id="distributions" class="section level1">
<h1>Visualizing data distributions</h1>
<p>Throughout your education, you may have noticed that numerical data is often summarized with the <em>average</em> value. For example, the quality of a high school is sometimes summarized with one number: the average score on a standardized test. Occasionally, a second number is reported: the <em>standard deviation</em>. For example, you might read a report stating that scores were 680 plus or minus 50 (the standard deviation). The report has summarized an entire vector of scores with just two numbers. Is this appropriate? Is there any important piece of information that we are missing by only looking at this summary rather than the entire list?</p>
<p>Our first data visualization building block is learning to summarize lists of factors or numeric vectors—the two primary data types that we encounter in data analytics. More often than not, the best way to share or explore this summary is through data visualization. The most basic statistical summary of a list of objects or numbers is its distribution. Once a vector has been summarized as a distribution, there are several data visualization techniques to effectively relay this information.</p>
<p>In this section, we first discuss properties of a variety of distributions and how to visualize distributions using a motivating example of student heights. We then discuss some principles of data visualizations more broadly.</p>
<div id="variable-types" class="section level2">
<h2>Variable types</h2>
<p>We will be working with two types of variables: categorical and numeric. Each can be divided into two other groups: categorical can be ordinal or not, whereas numerical variables can be discrete or continuous.</p>
<p>When each entry in a vector comes from one of a small number of groups, we refer to the data as <em>categorical data</em>. Two simple examples are sex (male or female) and regions (Northeast, South, North Central, West). Some categorical data can be ordered even if they are not numbers per se, such as spiciness (mild, medium, hot). In statistics textbooks, ordered categorical data are referred to as <em>ordinal</em> data. In psychology, a number of different terms are used for this same idea.</p>
<p>Examples of numerical data are population sizes, murder rates, and heights. Some numerical data can be treated as ordered categorical. We can further divide numerical data into continuous and discrete. Continuous variables are those that can take any value, such as heights, if measured with enough precision. For example, a pair of twins may be 68.12 and 68.11 inches, respectively. Counts, such as population sizes, are discrete because they have to be integers—that’s how we count.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
<div id="case-study-describing-student-heights" class="section level2">
<h2>Case study: describing student heights</h2>
<p>Here we consider an artificial problem to help us illustrate the underlying concepts.</p>
<p>Pretend that we have to describe the heights of our classmates to ET, an extraterrestrial that has never seen humans. As a first step, we need to collect data. To do this, we ask students to report their heights in inches. We ask them to provide sex information because we know there are two different distributions by sex. We collect the data and save it in the <code>heights</code> data frame:</p>
<pre class="r"><code>library(tidyverse)
library(dslabs)
data(heights)</code></pre>
<p>One way to convey the heights to ET is to simply send him this list of 1050 heights. But there are much more effective ways to convey this information, and understanding the concept of a distribution will help. To simplify the explanation, we first focus on male heights.</p>
</div>
<div id="distribution-function" class="section level2">
<h2>Distribution function</h2>
<p>It turns out that, in some cases, the average and the standard deviation are pretty much all we need to understand the data. We will learn data visualization techniques that will help us determine when this two number summary is appropriate. These same techniques will serve as an alternative for when two numbers are not enough.</p>
<p>The most basic statistical summary of a list of objects or numbers is its distribution. The simplest way to think of a distribution is as a compact description of a list with many entries. This concept should not be new for readers of this book. For example, with categorical data, the distribution simply describes the proportion of each unique category. The sex represented in the heights dataset is:</p>
<pre><code>## 
##    Female      Male 
## 0.2266667 0.7733333</code></pre>
<p>This two-category <em>frequency table</em> is the simplest form of a distribution. We don’t really need to visualize it since one number describes everything we need to know: 23% are females and the rest are males. When there are more categories, then a simple barplot describes the distribution. Here is an example with US state regions:</p>
<pre class="r"><code>murders %&gt;% group_by(region) %&gt;%
  summarize(n = n()) %&gt;%
  mutate(Proportion = n/sum(n),
         region = reorder(region, Proportion)) %&gt;%
  ggplot(aes(x=region, y=Proportion, fill=region)) +
  geom_bar(stat = &quot;identity&quot;, show.legend = FALSE) +
  xlab(&quot;&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/state-region-distribution-1.png" width="672" /></p>
<p>This particular plot simply shows us four numbers, one for each category. We usually use barplots to display a few numbers. Although this particular plot does not provide much more insight than a frequency table itself, it is a first example of how we convert a vector into a plot that succinctly summarizes all the information in the vector. When the data is numerical, the task of displaying distributions is more challenging.</p>
</div>
<div id="cdf-intro" class="section level2">
<h2>Cumulative distribution functions</h2>
<p>Numerical data that are not categorical also have distributions. In general, when data is not categorical, reporting the frequency of each entry is not an effective summary since most entries are unique. In our case study, while several students reported a height of 68 inches, only one student reported a height of <code>68.503937007874</code> inches and only one student reported a height <code>68.8976377952756</code> inches. We assume that they converted from 174 and 175 centimeters, respectively.</p>
<p>Statistics textbooks teach us that a more useful way to define a distribution for numeric data is to define a function that reports the proportion of the data below <span class="math inline">\(a\)</span> for all possible values of <span class="math inline">\(a\)</span>. This function is called the cumulative distribution function (CDF). In statistics, the following notation is used:</p>
<p><span class="math display">\[ F(a) = \mbox{Pr}(x \leq a) \]</span></p>
<p>Here is a plot of <span class="math inline">\(F\)</span> for the male height data:</p>
<p><img src="/content/02-content-old_files/figure-html/ecdf-1.png" width="672" /></p>
<p>Similar to what the frequency table does for categorical data, the CDF
defines the distribution for numerical data. From the plot, we can see that 16% of the values are below 65, since <span class="math inline">\(F(66)=\)</span> 0.1637931, or that 84% of the values are below 72, since <span class="math inline">\(F(72)=\)</span> 0.841133,
and so on. In fact, we can report the proportion of values between any two heights, say <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>, by computing <span class="math inline">\(F(b) - F(a)\)</span>. This means that if we send this plot above to ET, he will have all the information needed to reconstruct the entire list. Paraphrasing the expression “a picture is worth a thousand words”, in this case, a picture is as informative as 812 numbers.</p>
<p>A final note: because CDFs can be defined mathematically—and absent any data—the word <em>empirical</em> is added to make the distinction when data is used. We therefore use the term empirical CDF (eCDF).</p>
</div>
<div id="histograms" class="section level2">
<h2>Histograms</h2>
<p>Although the CDF concept is widely discussed in statistics textbooks, the plot is actually not very popular in practice. The main reason is that it does not easily convey characteristics of interest such as: at what value is the distribution centered? Is the distribution symmetric? What ranges contain 95% of the values? I doubt you can figure these out from glancing at the plot above. Histograms are much preferred because they greatly facilitate answering such questions. Histograms sacrifice just a bit of information to produce plots that are much easier to interpret.</p>
<p>The simplest way to make a histogram is to divide the span of our data into non-overlapping bins of the same size. Then, for each bin, we count the number of values that fall in that interval. The histogram plots these counts as bars with the base of the bar defined by the intervals. Here is the histogram for the height data splitting the range of values into one inch intervals: <span class="math inline">\((49.5, 50.5],(50.5, 51.5],(51.5,52.5],(52.5,53.5],...,(82.5,83.5]\)</span></p>
<p><img src="/content/02-content-old_files/figure-html/height-histogram-1.png" width="672" /></p>
<p>If we send this plot to some uninformed reader, she will immediately learn some important properties about our data. First, the range of the data is from 50 to 84 with the majority (more than 95%) between 63 and 75 inches. Second, the heights are close to symmetric around 69 inches. Also, by adding up counts, this reader could obtain a very good approximation of the proportion of the data in any interval. Therefore, the histogram above is not only easy to interpret, but also provides almost all the information contained in the raw list of 812 heights with about 30 bin counts.</p>
<p>What information do we lose? Note that all values in each interval are treated the same when computing bin heights. So, for example, the histogram does not distinguish between 64, 64.1, and 64.2 inches. Given that these differences are almost unnoticeable to the eye, the practical implications are negligible and we were able to summarize the data to just 23 numbers.</p>
</div>
<div id="smoothed-density" class="section level2">
<h2>Smoothed density</h2>
<p>Smooth density plots are aesthetically more appealing than histograms. Here is what a smooth density plot looks like for our heights data:</p>
<p><img src="/content/02-content-old_files/figure-html/example-of-smoothed-density-1.png" width="672" /></p>
<p>In this plot, we no longer have sharp edges at the interval boundaries and many of the local peaks have been removed. Also, the scale of the y-axis changed from counts to <em>density</em>.</p>
<p>To understand the smooth densities, we have to understand <em>estimates</em>, a topic we don’t cover until later. However, we provide a heuristic explanation to help you understand the basics so you can use this useful data visualization tool.</p>
<p>The main new concept you must understand is that we assume that our list of observed values is a subset of a much larger list of unobserved values. In the case of heights, you can imagine that our list of 812 male students comes from a hypothetical list containing all the heights of all the male students in all the world measured very precisely. Let’s say there are 1,000,000 of these measurements. This list of values has a distribution, like any list of values, and this larger distribution is really what we want to report to ET since it is much more general. Unfortunately, we don’t get to see it.</p>
<p>However, we make an assumption that helps us perhaps approximate it. If we had 1,000,000 values, measured very precisely, we could make a histogram with very, very small bins. The assumption is that if we show this, the height of consecutive bins will be similar. This is what we mean by smooth: we don’t have big jumps in the heights of consecutive bins. Below we have a hypothetical histogram with bins of size 1:</p>
<p><img src="/content/02-content-old_files/figure-html/simulated-data-histogram-1-1.png" width="672" /></p>
<p>The smaller we make the bins, the smoother the histogram gets. Here are the histograms with bin width of 1, 0.5, and 0.1:</p>
<p><img src="/content/02-content-old_files/figure-html/simulated-data-histogram-2-1.png" width="100%" /></p>
<p>The smooth density is basically the curve that goes through the top of the histogram bars when the bins are very, very small. To make the curve not depend on the hypothetical size of the hypothetical list, we compute the curve on frequencies rather than counts:</p>
<p><img src="/content/02-content-old_files/figure-html/simulated-density-1-1.png" width="672" /></p>
<p>Now, back to reality. We don’t have millions of measurements. In this concrete example, we have 812 and we can’t make a histogram with very small bins.</p>
<p>We therefore make a histogram, using bin sizes appropriate for our data and computing frequencies rather than counts, and we draw a smooth curve that goes through the tops of the histogram bars. The following plots (loosely) demonstrate the steps that the computer goes through to ultimately create a smooth density:</p>
<p><img src="/content/02-content-old_files/figure-html/smooth-density-2-1.png" width="100%" /></p>
<p>However, remember that <em>smooth</em> is a relative term. We can actually control the <em>smoothness</em> of the curve that defines the smooth density through an option in the function that computes the smooth density curve. Here are two examples using different degrees of smoothness on the same histogram:</p>
<p><img src="/content/02-content-old_files/figure-html/densities-different-smoothness-1.png" width="100%" />
We need to make this choice with care as the resulting visualizations can change our interpretation of the data. We should select a degree of smoothness that we can defend as being representative of the underlying data. In the case of height, we really do have reason to believe that the proportion of people with similar heights should be the same. For example, the proportion that is 72 inches should be more similar to the proportion that is 71 than to the proportion that is 78 or 65. This implies that the curve should be pretty smooth; that is, the curve should look more like the example on the right than on the left.</p>
<p>While the histogram is an assumption-free summary, the smoothed density is based on some assumptions.</p>
<div id="interpreting-the-y-axis" class="section level3">
<h3>Interpreting the y-axis</h3>
<p>Note that interpreting the y-axis of a smooth density plot is not straightforward. It is scaled so that the area under the density curve adds up to 1. If you imagine we form a bin with a base 1 unit in length, the y-axis value tells us the proportion of values in that bin. However, this is only true for bins of size 1. For other size intervals, the best way to determine the proportion of data in that interval is by computing the proportion of the total area contained in that interval. For example, here are the proportion of values between 65 and 68:</p>
<p><img src="/content/02-content-old_files/figure-html/area-under-curve-1.png" width="672" /></p>
<p>The proportion of this area is about
0.3,
meaning that about
30%
of male heights are between 65 and 68 inches.</p>
<p>By understanding this, we are ready to use the smooth density as a summary. For this dataset, we would feel quite comfortable with the smoothness assumption, and therefore with sharing this aesthetically pleasing figure with ET, which he could use to understand our male heights data:</p>
<p><img src="/content/02-content-old_files/figure-html/example-of-smoothed-density-2-1.png" width="672" /></p>
</div>
<div id="densities-permit-stratification" class="section level3">
<h3>Densities permit stratification</h3>
<p>As a final note, we point out that an advantage of smooth densities over histograms for visualization purposes is that densities make it easier to compare two distributions. This is in large part because the jagged edges of the histogram add clutter. Here is an example comparing male and female heights:</p>
<p><img src="/content/02-content-old_files/figure-html/two-densities-one-plot-1.png" width="672" /></p>
<p>With the right argument, <code>ggplot</code> automatically shades the intersecting region with a different color. We will show examples of <strong>ggplot2</strong> code in the coming Example later this week.</p>
</div>
</div>
<div id="normal-distribution" class="section level2">
<h2>The normal distribution</h2>
<p>Histograms and density plots provide excellent summaries of a distribution. But can we summarize even further? We often see the average and standard deviation used as summary statistics: a two-number summary! To understand what these summaries are and why they are so widely used, we need to understand the normal distribution.</p>
<p>The normal distribution, also known as the bell curve and as the Gaussian distribution, is one of the most famous mathematical concepts in history. A reason for this is that approximately normal distributions occur in many situations, including gambling winnings, heights, weights, blood pressure, standardized test scores, and experimental measurement errors. There are explanations for this, but we describe these later. Here we focus on how the normal distribution helps us summarize data.</p>
<p>Rather than using data, the normal distribution is defined with a mathematical formula. For any interval <span class="math inline">\((a,b)\)</span>, the proportion of values in that interval can be computed using this formula:</p>
<p><span class="math display">\[\mbox{Pr}(a &lt; x &lt; b) = \int_a^b \frac{1}{\sqrt{2\pi}s} e^{-\frac{1}{2}\left( \frac{x-m}{s} \right)^2} \, dx\]</span></p>
<p>You don’t need to memorize or understand the details of the formula. But note that it is completely defined by just two parameters: <span class="math inline">\(m\)</span> and <span class="math inline">\(s\)</span>. The rest of the symbols in the formula represent the interval ends that we determine, <span class="math inline">\(a\)</span> and <span class="math inline">\(b\)</span>, and known mathematical constants <span class="math inline">\(\pi\)</span> and <span class="math inline">\(e\)</span>. These two parameters, <span class="math inline">\(m\)</span> and <span class="math inline">\(s\)</span>, are referred to as the <em>average</em> (also called the <em>mean</em>) and the <em>standard deviation</em> (SD) of the distribution, respectively.</p>
<p>The distribution is symmetric, centered at the average, and most values (about 95%) are within 2 SDs from the average. Here is what the normal distribution looks like when the average is 0 and the SD is 1:</p>
<p><img src="/content/02-content-old_files/figure-html/normal-distribution-density-1.png" width="672" /></p>
<p>The fact that the distribution is defined by just two parameters implies that if a dataset is approximated by a normal distribution, all the information needed to describe the distribution can be encoded in just two numbers: the average and the standard deviation. We now define these values for an arbitrary list of numbers.</p>
<p>For a list of numbers contained in a vector <code>x</code>, the average is defined as:</p>
<pre class="r"><code>m &lt;- sum(x) / length(x)</code></pre>
<p>and the SD is defined as:</p>
<pre class="r"><code>s &lt;- sqrt(sum((x-mu)^2) / length(x))</code></pre>
<p>which can be interpreted as the average distance between values and their average.</p>
<p>Let’s compute the values for the height for males which we will store in the object <span class="math inline">\(x\)</span>:</p>
<pre class="r"><code>index &lt;- heights$sex == &quot;Male&quot;
x &lt;- heights$height[index]</code></pre>
<p>The pre-built functions <code>mean</code> and <code>sd</code> (note that for reasons explained in Section <a href="#data-driven-model"><strong>??</strong></a>, <code>sd</code> divides by <code>length(x)-1</code> rather than <code>length(x)</code>) can be used here:</p>
<pre class="r"><code>m &lt;- mean(x)
s &lt;- sd(x)
c(average = m, sd = s)</code></pre>
<pre><code>##   average        sd 
## 69.314755  3.611024</code></pre>
<p>Here is a plot of the smooth density and the normal distribution with mean = 69.3 and SD = 3.6 plotted as a black line with our student height smooth density in blue:</p>
<p><img src="/content/02-content-old_files/figure-html/data-and-normal-densities-1.png" width="672" /></p>
<p>The normal distribution does appear to be quite a good approximation here. We now will see how well this approximation works at predicting the proportion of values within intervals.</p>
</div>
<div id="standard-units" class="section level2">
<h2>Standard units</h2>
<p>For data that is approximately normally distributed, it is convenient to think in terms of <em>standard units</em>. The standard unit of a value tells us how many standard deviations away from the average it is. Specifically, for a value <code>x</code> from a vector <code>X</code>, we define the value of <code>x</code> in standard units as <code>z = (x - m)/s</code> with <code>m</code> and <code>s</code> the average and standard deviation of <code>X</code>, respectively. Why is this convenient?</p>
<p>First look back at the formula for the normal distribution and note that what is being exponentiated is <span class="math inline">\(-z^2/2\)</span> with <span class="math inline">\(z\)</span> equivalent to <span class="math inline">\(x\)</span> in standard units. Because the maximum of <span class="math inline">\(e^{-z^2/2}\)</span> is when <span class="math inline">\(z=0\)</span>, this explains why the maximum of the distribution occurs at the average. It also explains the symmetry since <span class="math inline">\(- z^2/2\)</span> is symmetric around 0. Second, note that if we convert the normally distributed data to standard units, we can quickly know if, for example, a person is about average (<span class="math inline">\(z=0\)</span>), one of the largest (<span class="math inline">\(z \approx 2\)</span>), one of the smallest (<span class="math inline">\(z \approx -2\)</span>), or an extremely rare occurrence (<span class="math inline">\(z &gt; 3\)</span> or <span class="math inline">\(z &lt; -3\)</span>). Remember that it does not matter what the original units are, these rules apply to any data that is approximately normal.</p>
<p>In R, we can obtain standard units using the function <code>scale</code>:</p>
<pre class="r"><code>z &lt;- scale(x)</code></pre>
<p>Now to see how many men are within 2 SDs from the average, we simply type:</p>
<pre class="r"><code>mean(abs(z) &lt; 2)</code></pre>
<pre><code>## [1] 0.9495074</code></pre>
<p>The proportion is about 95%, which is what the normal distribution predicts! To further confirm that, in fact, the approximation is a good one, we can use quantile-quantile plots.</p>
</div>
<div id="quantile-quantile-plots" class="section level2">
<h2>Quantile-quantile plots</h2>
<p>A systematic way to assess how well the normal distribution fits the data is to check if the observed and predicted proportions match. In general, this is the approach of the quantile-quantile plot (QQ-plot).</p>
<p>First let’s define the theoretical quantiles for the normal distribution. In statistics books we use the symbol <span class="math inline">\(\Phi(x)\)</span> to define the function that gives us the probability of a standard normal distribution being smaller than <span class="math inline">\(x\)</span>. So, for example, <span class="math inline">\(\Phi(-1.96) = 0.025\)</span> and <span class="math inline">\(\Phi(1.96) = 0.975\)</span>. In R, we can evaluate <span class="math inline">\(\Phi\)</span> using the <code>pnorm</code> function:</p>
<pre class="r"><code>pnorm(-1.96)</code></pre>
<pre><code>## [1] 0.0249979</code></pre>
<p>The inverse function <span class="math inline">\(\Phi^{-1}(x)\)</span> gives us the <em>theoretical quantiles</em> for the normal distribution. So, for example, <span class="math inline">\(\Phi^{-1}(0.975) = 1.96\)</span>. In R, we can evaluate the inverse of <span class="math inline">\(\Phi\)</span> using the <code>qnorm</code> function.</p>
<pre class="r"><code>qnorm(0.975)</code></pre>
<pre><code>## [1] 1.959964</code></pre>
<p>Note that these calculations are for the standard normal distribution by default (mean = 0, standard deviation = 1), but we can also define these for any normal distribution. We can do this using the <code>mean</code> and <code>sd</code> arguments in the <code>pnorm</code> and <code>qnorm</code> function. For example, we can use <code>qnorm</code> to determine quantiles of a distribution with a specific average and standard deviation</p>
<pre class="r"><code>qnorm(0.975, mean = 5, sd = 2)</code></pre>
<pre><code>## [1] 8.919928</code></pre>
<p>For the normal distribution, all the calculations related to quantiles are done without data, thus the name <em>theoretical quantiles</em>. But quantiles can be defined for any distribution, including an empirical one. So if we have data in a vector <span class="math inline">\(x\)</span>, we can define the quantile associated with any proportion <span class="math inline">\(p\)</span> as the <span class="math inline">\(q\)</span> for which the proportion of values below <span class="math inline">\(q\)</span> is <span class="math inline">\(p\)</span>. Using R code, we can define <code>q</code> as the value for which <code>mean(x &lt;= q) = p</code>. Notice that not all <span class="math inline">\(p\)</span> have a <span class="math inline">\(q\)</span> for which the proportion is exactly <span class="math inline">\(p\)</span>. There are several ways of defining the best <span class="math inline">\(q\)</span> as discussed in the help for the <code>quantile</code> function.</p>
<p>To give a quick example, for the male heights data, we have that:</p>
<pre class="r"><code>mean(x &lt;= 69.5)</code></pre>
<pre><code>## [1] 0.5147783</code></pre>
<p>So about 50% are shorter or equal to 69 inches. This implies that if <span class="math inline">\(p=0.50\)</span> then <span class="math inline">\(q=69.5\)</span>.</p>
<p>The idea of a QQ-plot is that if your data is well approximated by normal distribution then the quantiles of your data should be similar to the quantiles of a normal distribution. To construct a QQ-plot, we do the following:</p>
<ol style="list-style-type: decimal">
<li>Define a vector of <span class="math inline">\(m\)</span> proportions <span class="math inline">\(p_1, p_2, \dots, p_m\)</span>.</li>
<li>Define a vector of quantiles <span class="math inline">\(q_1, \dots, q_m\)</span> for your data for the proportions <span class="math inline">\(p_1, \dots, p_m\)</span>. We refer to these as the <em>sample quantiles</em>.</li>
<li>Define a vector of theoretical quantiles for the proportions <span class="math inline">\(p_1, \dots, p_m\)</span> for a normal distribution with the same average and standard deviation as the data.</li>
<li>Plot the sample quantiles versus the theoretical quantiles.</li>
</ol>
<p>Let’s construct a QQ-plot using R code. Start by defining the vector of proportions.</p>
<pre class="r"><code>p &lt;- seq(0.05, 0.95, 0.05)</code></pre>
<p>To obtain the quantiles from the data, we can use the <code>quantile</code> function like this:</p>
<pre class="r"><code>sample_quantiles &lt;- quantile(x, p)</code></pre>
<p>To obtain the theoretical normal distribution quantiles with the corresponding average and SD, we use the <code>qnorm</code> function:</p>
<pre class="r"><code>theoretical_quantiles &lt;- qnorm(p, mean = mean(x), sd = sd(x))</code></pre>
<p>To see if they match or not, we plot them against each other and draw the identity line:</p>
<pre class="r"><code>qplot(theoretical_quantiles, sample_quantiles) + geom_abline()</code></pre>
<p><img src="/content/02-content-old_files/figure-html/qqplot-original-1.png" width="672" /></p>
<p>Notice that this code becomes much cleaner if we use standard units:</p>
<pre class="r"><code>sample_quantiles &lt;- quantile(z, p)
theoretical_quantiles &lt;- qnorm(p)
qplot(theoretical_quantiles, sample_quantiles) + geom_abline()</code></pre>
<p>The above code is included to help describe QQ-plots. However, in practice it is easier to use the <strong>ggplot2</strong> code described in Section <a href="#other-geometries"><strong>??</strong></a>:</p>
<pre class="r"><code>heights %&gt;% filter(sex == &quot;Male&quot;) %&gt;%
  ggplot(aes(sample = scale(height))) +
  geom_qq() +
  geom_abline()</code></pre>
<p>While for the illustration above we used 20 quantiles, the default from the <code>geom_qq</code> function is to use as many quantiles as data points.</p>
</div>
<div id="percentiles" class="section level2">
<h2>Percentiles</h2>
<p>Before we move on, let’s define some terms that are commonly used in exploratory data analysis.</p>
<p><em>Percentiles</em> are special cases of <em>quantiles</em> that are commonly used. The percentiles are the quantiles you obtain when setting the <span class="math inline">\(p\)</span> at <span class="math inline">\(0.01, 0.02, ..., 0.99\)</span>. We call, for example, the case of <span class="math inline">\(p=0.25\)</span> the 25th percentile, which gives us a number for which 25% of the data is below. The most famous percentile is the 50th, also known as the <em>median</em>.</p>
<p>For the normal distribution the <em>median</em> and average are the same, but this is generally not the case.</p>
<p>Another special case that receives a name are the <em>quartiles</em>, which are obtained when setting <span class="math inline">\(p=0.25,0.50\)</span>, and <span class="math inline">\(0.75\)</span>.</p>
</div>
<div id="boxplots" class="section level2">
<h2>Boxplots</h2>
<p>To introduce boxplots we will go back to the US murder data.
Suppose we want to summarize the murder rate distribution. Using the data visualization technique we have learned, we can quickly see that the normal approximation does not apply here:</p>
<p><img src="/content/02-content-old_files/figure-html/hist-qqplot-non-normal-data-1.png" width="100%" /></p>
<p>In this case, the histogram above or a smooth density plot would serve as a relatively succinct summary.</p>
<p>Now suppose those used to receiving just two numbers as summaries ask us for a more compact numerical summary.</p>
<p>Here, some of our wise predecessors have offered their advice. In short, the standard methodology is to provide a five-number summary composed of the range along with the quartiles (the 25th, 50th, and 75th percentiles). Further, ignore <em>outliers</em> when computing the range and instead plot these as independent points.<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> Finally, plot these numbers as a “box” with “whiskers” like this:</p>
<p><img src="/content/02-content-old_files/figure-html/first-boxplot-1.png" width="672" /></p>
<p>with the box defined by the 25% and 75% percentile and the whiskers showing the range. The distance between these two is called the <em>interquartile</em> range. The median is shown with a horizontal line. Today, we call these <em>boxplots</em>.</p>
<p>From just this simple plot, we know that the median is about 2.5, that the distribution is not symmetric, and that the range is 0 to 5 for the great majority of states with two exceptions.</p>
</div>
<div id="stratification" class="section level2">
<h2>Stratification</h2>
<p>In data analysis we often divide observations into groups based on the values of one or more variables associated with those observations. For example in the next section we divide the height values into groups based on a sex variable: females and males. We call this procedure <em>stratification</em> and refer to the resulting groups as <em>strata</em>.</p>
<p>Stratification is common in data visualization because we are often interested in how the distribution of variables differs across different subgroups. We will see several examples throughout this part of the book. We will revisit the concept of stratification when we learn regression in Chapter <a href="#regression"><strong>??</strong></a> and in the Machine Learning part of the book.</p>
</div>
<div id="student-height-cont" class="section level2">
<h2>Case study: describing student heights (continued)</h2>
<p>Using the histogram, density plots, and QQ-plots, we have become convinced that the male height data is well approximated with a normal distribution. In this case, we report back to ET a very succinct summary: male heights follow a normal distribution with an average of 69.3 inches and a SD of 3.6 inches. With this information, ET will have a good idea of what to expect when he meets our male students.
However, to provide a complete picture we need to also provide a summary of the female heights.</p>
<p>We learned that boxplots are useful when we want to quickly compare two or more distributions. Here are the heights for men and women:</p>
<p><img src="/content/02-content-old_files/figure-html/female-male-boxplots-1.png" width="672" /></p>
<p>The plot immediately reveals that males are, on average, taller than females. The standard deviations appear to be similar. But does the normal approximation also work for the female height data collected by the survey? We expect that they will follow a normal distribution, just like males. However, exploratory plots reveal that the approximation is not as useful:</p>
<p><img src="/content/02-content-old_files/figure-html/histogram-qqplot-female-heights-1.png" width="100%" /></p>
<p>We see something we did not see for the males: the density plot has a second “bump”. Also, the QQ-plot shows that the highest points tend to be taller than expected by the normal distribution. Finally, we also see five points in the QQ-plot that suggest shorter than expected heights for a normal distribution. When reporting back to ET, we might need to provide a histogram rather than just the average and standard deviation for the female heights.</p>
<p>However, go back and read Tukey’s quote. We have noticed what we didn’t expect to see. If we look at other female height distributions, we do find that they are well approximated with a normal distribution. So why are our female students different? Is our class a requirement for the female basketball team? Are small proportions of females claiming to be taller than they are? Another, perhaps more likely, explanation is that in the form students used to enter their heights, <code>FEMALE</code> was the default sex and some males entered their heights, but forgot to change the sex variable. In any case, data visualization has helped discover a potential flaw in our data.</p>
<p>Regarding the five smallest values, note that these values are:</p>
<pre class="r"><code>heights %&gt;% filter(sex == &quot;Female&quot;) %&gt;%
  top_n(5, desc(height)) %&gt;%
  pull(height)</code></pre>
<pre><code>## [1] 51 53 55 52 52</code></pre>
<p>Because these are reported heights, a possibility is that the student meant to enter <code>5'1"</code>, <code>5'2"</code>, <code>5'3"</code> or <code>5'5"</code>.</p>
<div class="fyi">
<p><strong>TRY IT</strong></p>
<ol style="list-style-type: decimal">
<li>Define variables containing the heights of males and females like this:</li>
</ol>
<pre class="r"><code>library(dslabs)
data(heights)
male &lt;- heights$height[heights$sex == &quot;Male&quot;]
female &lt;- heights$height[heights$sex == &quot;Female&quot;]</code></pre>
<p>How many measurements do we have for each?</p>
<ol start="2" style="list-style-type: decimal">
<li><p>Suppose we can’t make a plot and want to compare the distributions side by side. We can’t just list all the numbers. Instead, we will look at the percentiles. Create a five row table showing <code>female_percentiles</code> and <code>male_percentiles</code> with the 10th, 30th, 50th, 70th, &amp; 90th percentiles for each sex. Then create a data frame with these two as columns.</p></li>
<li><p>Study the following boxplots showing population sizes by country:</p></li>
</ol>
<p><img src="/content/02-content-old_files/figure-html/boxplot-exercise-1.png" width="672" /></p>
<p>Which continent has the country with the biggest population size?</p>
<ol start="4" style="list-style-type: decimal">
<li><p>What continent has the largest median population size?</p></li>
<li><p>What is median population size for Africa to the nearest million?</p></li>
<li><p>What proportion of countries in Europe have populations below 14 million?</p></li>
<li><p>If we use a log transformation, which continent shown above has the largest interquartile range?</p></li>
<li><p>Load the height data set and create a vector <code>x</code> with just the male heights:</p></li>
</ol>
<pre class="r"><code>library(dslabs)
data(heights)
x &lt;- heights$height[heights$sex==&quot;Male&quot;]</code></pre>
<p>What proportion of the data is between 69 and 72 inches (taller than 69, but shorter or equal to 72)? Hint: use a logical operator and <code>mean</code>.</p>
<ol start="9" style="list-style-type: decimal">
<li><p>Suppose all you know about the data is the average and the standard deviation. Use the normal approximation to estimate the proportion you just calculated. Hint: start by computing the average and standard deviation. Then use the <code>pnorm</code> function to predict the proportions.</p></li>
<li><p>Notice that the approximation calculated in question nine is very close to the exact calculation in the first question. Now perform the same task for more extreme values. Compare the exact calculation and the normal approximation for the interval (79,81]. How many times bigger is the actual proportion than the approximation?</p></li>
<li><p>Approximate the distribution of adult men in the world as normally distributed with an average of 69 inches and a standard deviation of 3 inches. Using this approximation, estimate the proportion of adult men that are 7 feet tall or taller, referred to as <em>seven footers</em>. Hint: use the <code>pnorm</code> function.</p></li>
<li><p>There are about 1 billion men between the ages of 18 and 40 in the world. Use your answer to the previous question to estimate how many of these men (18-40 year olds) are seven feet tall or taller in the world?</p></li>
<li><p>There are about 10 National Basketball Association (NBA) players that are 7 feet tall or higher. Using the answer to the previous two questions, what proportion of the world’s 18-to-40-year-old <em>seven footers</em> are in the NBA?</p></li>
<li><p>Repeat the calculations performed in the previous question for Lebron James’ height: 6 feet 8 inches. There are about 150 players that are at least that tall.</p></li>
<li><p>In answering the previous questions, we found that it is not at all rare for a seven footer to become an NBA player. What would be a fair critique of our calculations:</p></li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>Practice and talent are what make a great basketball player, not height.</li>
<li>The normal approximation is not appropriate for heights.</li>
<li>As seen in question 10, the normal approximation tends to underestimate the extreme values. It’s possible that there are more seven footers than we predicted.</li>
<li>As seen in question 10, the normal approximation tends to overestimate the extreme values. It’s possible that there are fewer seven footers than we predicted.</li>
</ol>
</div>
</div>
<div id="other-geometries" class="section level2">
<h2>ggplot2 geometries</h2>
<p>Alhough we haven’t gone into detain about the <strong>ggplot2</strong> package for data visualization, we now will briefly discuss some of the geometries involved in the plots above. We will discuss <strong>ggplot2</strong> in (excruciating) detail later this week. For now, we will briefly demonstrate how to generate plots related to distributions.</p>
<div id="barplots" class="section level3">
<h3>Barplots</h3>
<p>To generate a barplot we can use the <code>geom_bar</code> geometry. The default is to count the number of each category and draw a bar. Here is the plot for the regions of the US.</p>
<pre class="r"><code>murders %&gt;% ggplot(aes(region)) + geom_bar()</code></pre>
<p><img src="/content/02-content-old_files/figure-html/barplot-geom-1.png" width="672" /></p>
<p>We often already have a table with a distribution that we want to present as a barplot. Here is an example of such a table:</p>
<pre class="r"><code>data(murders)
tab &lt;- murders %&gt;%
  count(region) %&gt;%
  mutate(proportion = n/sum(n))
tab</code></pre>
<pre><code>##          region  n proportion
## 1     Northeast  9  0.1764706
## 2         South 17  0.3333333
## 3 North Central 12  0.2352941
## 4          West 13  0.2549020</code></pre>
<p>We no longer want <code>geom_bar</code> to count, but rather just plot a bar to the height provided by the <code>proportion</code> variable. For this we need to provide <code>x</code> (the categories) and <code>y</code> (the values) and use the <code>stat="identity"</code> option.</p>
<pre class="r"><code>tab %&gt;% ggplot(aes(region, proportion)) + geom_bar(stat = &quot;identity&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/region-freq-barplot-1.png" width="672" /></p>
</div>
<div id="histograms-1" class="section level3">
<h3>Histograms</h3>
<p>To generate histograms we use <code>geom_histogram</code>. By looking at the help file for this function, we learn that the only required argument is <code>x</code>, the variable for which we will construct a histogram. We dropped the <code>x</code> because we know it is the first argument.
The code looks like this:</p>
<pre class="r"><code>heights %&gt;%
  filter(sex == &quot;Female&quot;) %&gt;%
  ggplot(aes(height)) +
  geom_histogram()</code></pre>
<p>If we run the code above, it gives us a message:</p>
<blockquote>
<p><code>stat_bin()</code> using <code>bins = 30</code>. Pick better value with
<code>binwidth</code>.</p>
</blockquote>
<p>We previously used a bin size of 1 inch, so the code looks like this:</p>
<pre class="r"><code>heights %&gt;%
  filter(sex == &quot;Female&quot;) %&gt;%
  ggplot(aes(height)) +
  geom_histogram(binwidth = 1)</code></pre>
<p>Finally, if for aesthetic reasons we want to add color, we use the arguments described in the help file. We also add labels and a title:</p>
<pre class="r"><code>heights %&gt;%
  filter(sex == &quot;Female&quot;) %&gt;%
  ggplot(aes(height)) +
  geom_histogram(binwidth = 1, fill = &quot;blue&quot;, col = &quot;black&quot;) +
  xlab(&quot;Male heights in inches&quot;) +
  ggtitle(&quot;Histogram&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/height-histogram-geom-1.png" width="672" /></p>
</div>
<div id="density-plots" class="section level3">
<h3>Density plots</h3>
<p>To create a smooth density, we use the <code>geom_density</code>. To make a smooth density plot with the data previously shown as a histogram we can use this code:</p>
<pre class="r"><code>heights %&gt;%
  filter(sex == &quot;Female&quot;) %&gt;%
  ggplot(aes(height)) +
  geom_density()</code></pre>
<p>To fill in with color, we can use the <code>fill</code> argument.</p>
<pre class="r"><code>heights %&gt;%
  filter(sex == &quot;Female&quot;) %&gt;%
  ggplot(aes(height)) +
  geom_density(fill=&quot;blue&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/ggplot-density-1.png" width="672" /></p>
<p>To change the smoothness of the density, we use the <code>adjust</code> argument to multiply the default value by that <code>adjust</code>. For example, if we want the bandwidth to be twice as big we use:</p>
<pre class="r"><code>heights %&gt;%
  filter(sex == &quot;Female&quot;) +
  geom_density(fill=&quot;blue&quot;, adjust = 2)</code></pre>
</div>
<div id="boxplots-1" class="section level3">
<h3>Boxplots</h3>
<p>The geometry for boxplot is <code>geom_boxplot</code>. As discussed, boxplots are useful for comparing distributions. For example, below are the previously shown heights for women, but compared to men. For this geometry, we need arguments <code>x</code> as the categories, and <code>y</code> as the values.</p>
<p><img src="/content/02-content-old_files/figure-html/female-male-boxplots-geom-1.png" width="672" /></p>
</div>
<div id="qq-plots" class="section level3">
<h3>QQ-plots</h3>
<p>For qq-plots we use the <code>geom_qq</code> geometry. From the help file, we learn that we need to specify the <code>sample</code> (we will learn about samples in a later bit of the course). Here is the qqplot for men heights.</p>
<pre class="r"><code>heights %&gt;% filter(sex==&quot;Male&quot;) %&gt;%
  ggplot(aes(sample = height)) +
  geom_qq()</code></pre>
<p><img src="/content/02-content-old_files/figure-html/ggplot-qq-1.png" width="672" /></p>
<p>By default, the sample variable is compared to a normal distribution with average 0 and standard deviation 1. To change this, we use the <code>dparams</code> arguments based on the help file. Adding an identity line is as simple as assigning another layer. For straight lines, we use the <code>geom_abline</code> function. The default line is the identity line (slope = 1, intercept = 0).</p>
<pre class="r"><code>params &lt;- heights %&gt;% filter(sex==&quot;Male&quot;) %&gt;%
  summarize(mean = mean(height), sd = sd(height))

heights %&gt;% filter(sex==&quot;Male&quot;) %&gt;%
  ggplot(aes(sample = height)) +
  geom_qq(dparams = params) +
  geom_abline()</code></pre>
<p>Another option here is to scale the data first and then make a qqplot against the standard normal.</p>
<pre class="r"><code>heights %&gt;%
  filter(sex==&quot;Male&quot;) %&gt;%
  ggplot(aes(sample = scale(height))) +
  geom_qq() +
  geom_abline()</code></pre>
</div>
</div>
</div>
<div id="data-visualization-principles" class="section level1">
<h1>Data visualization principles</h1>
<p>We have already provided some rules to follow as we created plots for our examples. Here, we aim to provide some general principles we can use as a guide for effective data visualization. Much of this section is based on a talk by Karl Broman<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> titled “Creating Effective Figures and Tables”<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a> and includes some of the figures which were made with code that Karl makes available on his GitHub repository<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>, as well as class notes from Peter Aldhous’ Introduction to Data Visualization course<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>. Following Karl’s approach, we show some examples of plot styles we should avoid, explain how to improve them, and use these as motivation for a list of principles. We compare and contrast plots that follow these principles to those that don’t.</p>
<p>The principles are mostly based on research related to how humans detect patterns and make visual comparisons. The preferred approaches are those that best fit the way our brains process visual information. When deciding on a visualization approach, it is also important to keep our goal in mind. We may be comparing a viewable number of quantities, describing distributions for categories or numeric values, comparing the data from two groups, or describing the relationship between two variables. As a final note, we want to emphasize that for a data scientist it is important to adapt and optimize graphs to the audience. For example, an exploratory plot made for ourselves will be different than a chart intended to communicate a finding to a general audience.</p>
<p>As with the discussion above, we will be using these libraries—note the addition of <strong>gridExtra</strong>:</p>
<pre class="r"><code>library(tidyverse)
library(dslabs)
library(gridExtra)</code></pre>
<div id="encoding-data-using-visual-cues" class="section level2">
<h2>Encoding data using visual cues</h2>
<p>We start by describing some principles for encoding data. There are several approaches at our disposal including position, aligned lengths, angles, area, brightness, and color hue.</p>
<p>To illustrate how some of these strategies compare, let’s suppose we want to report the results from two hypothetical polls regarding browser preference taken in 2000 and then 2015. For each year, we are simply comparing five quantities – the five percentages. A widely used graphical representation of percentages, popularized by Microsoft Excel, is the pie chart:</p>
<pre><code>## Warning: package &#39;ggthemes&#39; was built under R version 4.0.4</code></pre>
<p><img src="/content/02-content-old_files/figure-html/piechart-1.png" width="672" /></p>
<p>Here we are representing quantities with both areas and angles, since both the angle and area of each pie slice are proportional to the quantity the slice represents. This turns out to be a sub-optimal choice since, as demonstrated by perception studies, humans are not good at precisely quantifying angles and are even worse when area is the only available visual cue. The donut chart is an example of a plot that uses only area:</p>
<p><img src="/content/02-content-old_files/figure-html/donutchart-1.png" width="672" /></p>
<p>To see how hard it is to quantify angles and area, note that the rankings and all the percentages in the plots above changed from 2000 to 2015. Can you determine the actual percentages and rank the browsers’ popularity? Can you see how the percentages changed from 2000 to 2015? It is not easy to tell from the plot. In fact, the <code>pie</code> R function help file states that:</p>
<blockquote>
<p>Pie charts are a very bad way of displaying information. The eye is good at judging linear measures and bad at judging relative areas. A bar chart or dot chart is a preferable way of displaying this type of data.</p>
</blockquote>
<p>In this case, simply showing the numbers is not only clearer, but would also save on printing costs if printing a paper copy:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Browser
</th>
<th style="text-align:right;">
2000
</th>
<th style="text-align:right;">
2015
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Opera
</td>
<td style="text-align:right;">
3
</td>
<td style="text-align:right;">
2
</td>
</tr>
<tr>
<td style="text-align:left;">
Safari
</td>
<td style="text-align:right;">
21
</td>
<td style="text-align:right;">
22
</td>
</tr>
<tr>
<td style="text-align:left;">
Firefox
</td>
<td style="text-align:right;">
23
</td>
<td style="text-align:right;">
21
</td>
</tr>
<tr>
<td style="text-align:left;">
Chrome
</td>
<td style="text-align:right;">
26
</td>
<td style="text-align:right;">
29
</td>
</tr>
<tr>
<td style="text-align:left;">
IE
</td>
<td style="text-align:right;">
28
</td>
<td style="text-align:right;">
27
</td>
</tr>
</tbody>
</table>
<p>The preferred way to plot these quantities is to use length and position as visual cues, since humans are much better at judging linear measures. The barplot uses this approach by using bars of length proportional to the quantities of interest. By adding horizontal lines at strategically chosen values, in this case at every multiple of 10, we ease the visual burden of quantifying through the position of the top of the bars. Compare and contrast the information we can extract from the two figures.</p>
<p><img src="/content/02-content-old_files/figure-html/two-barplots-1.png" width="100%" /></p>
<p>Notice how much easier it is to see the differences in the barplot. In fact, we can now determine the actual percentages by following a horizontal line to the x-axis.</p>
<p>If for some reason you need to make a pie chart, label each pie slice with its respective percentage so viewers do not have to infer them from the angles or area:</p>
<p><img src="/content/02-content-old_files/figure-html/excel-barplot-1.png" width="672" /></p>
<p>In general, when displaying quantities, position and length are preferred over angles and/or area. Brightness and color are even harder to quantify than angles. But, as we will see later, they are sometimes useful when more than two dimensions must be displayed at once.</p>
</div>
<div id="know-when-to-include-0" class="section level2">
<h2>Know when to include 0</h2>
<p>When using barplots, it is misinformative not to start the bars at 0. This is because, by using a barplot, we are implying the length is proportional to the quantities being displayed. By avoiding 0, relatively small differences can be made to look much bigger than they actually are. This approach is often used by politicians or media organizations trying to exaggerate a difference. Below is an illustrative example used by Peter Aldhous in this lecture: <a href="http://paldhous.github.io/ucb/2016/dataviz/week2.html">http://paldhous.github.io/ucb/2016/dataviz/week2.html</a>.</p>
<p><img src="/./02-content_files/class2_8.jpg" /></p>
<p>(Source: Fox News, via Media Matters<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>.)</p>
<p>From the plot above, it appears that apprehensions have almost tripled when, in fact, they have only increased by about 16%. Starting the graph at 0 illustrates this clearly:</p>
<p><img src="/content/02-content-old_files/figure-html/barplot-from-zero-1-1.png" width="672" /></p>
<p>Here is another example, described in detail in a Flowing Data blog post:</p>
<p><img src="/./02-content_files/Bush-cuts.png" /></p>
<p>(Source: Fox News, via Flowing Data<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>.)</p>
<p>This plot makes a 13% increase look like a five fold change. Here is the appropriate plot:</p>
<p><img src="/content/02-content-old_files/figure-html/barplot-from-zero-2-1.png" width="672" /></p>
<p>Finally, here is an extreme example that makes a very small difference of under 2% look like a 10-100 fold change:</p>
<p><img src="/./02-content_files/venezuela-election.png" /></p>
<p>(Source:
Venezolana de Televisión via Pakistan Today<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a> and Diego Mariano.)</p>
<p>Here is the appropriate plot:</p>
<p><img src="/content/02-content-old_files/figure-html/barplot-from-zero-3-1.png" width="672" /></p>
<p>When using position rather than length, it is then not necessary to include 0. This is particularly the case when we want to compare differences between groups relative to the within-group variability. Here is an illustrative example showing country average life expectancy stratified across continents in 2012:</p>
<p><img src="/content/02-content-old_files/figure-html/points-plot-not-from-zero-1.png" width="100%" /></p>
<p>Note that in the plot on the left, which includes 0, the space between 0 and 43 adds no information and makes it harder to compare the between and within group variability.</p>
</div>
<div id="do-not-distort-quantities" class="section level2">
<h2>Do not distort quantities</h2>
<p>During President Barack Obama’s 2011 State of the Union Address, the following chart was used to compare the US GDP to the GDP of four competing nations:</p>
<p><img src="/./02-content_files/state-of-the-union.png" /></p>
<p>(Source: The 2011 State of the Union Address<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a>)</p>
<p>Judging by the area of the circles, the US appears to have an economy over five times larger than China’s and over 30 times larger than France’s. However, if we look at the actual numbers, we see that this is not the case. The actual ratios are 2.6 and 5.8 times bigger than China and France, respectively. The reason for this distortion is that the radius, rather than the area, was made to be proportional to the quantity, which implies that the proportion between the areas is squared: 2.6 turns into 6.5 and 5.8 turns into 34.1. Here is a comparison of the circles we get if we make the value proportional to the radius and to the area:</p>
<pre class="r"><code>gdp &lt;- c(14.6, 5.7, 5.3, 3.3, 2.5)
gdp_data &lt;- data.frame(Country = rep(c(&quot;United States&quot;, &quot;China&quot;, &quot;Japan&quot;, &quot;Germany&quot;, &quot;France&quot;),2),
           y = factor(rep(c(&quot;Radius&quot;,&quot;Area&quot;),each=5), levels = c(&quot;Radius&quot;, &quot;Area&quot;)),
           GDP= c(gdp^2/min(gdp^2), gdp/min(gdp))) %&gt;%
   mutate(Country = reorder(Country, GDP))
gdp_data %&gt;%
  ggplot(aes(Country, y, size = GDP)) +
  geom_point(show.legend = FALSE, color = &quot;blue&quot;) +
  scale_size(range = c(2,25)) +
  coord_flip() + ylab(&quot;&quot;) + xlab(&quot;&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/area-not-radius-1.png" width="672" /></p>
<p>Not surprisingly, <strong>ggplot2</strong> defaults to using area rather than
radius. Of course, in this case, we really should not be using area at all since we can use position and length:</p>
<pre class="r"><code>gdp_data %&gt;%
  filter(y == &quot;Area&quot;) %&gt;%
  ggplot(aes(Country, GDP)) +
  geom_bar(stat = &quot;identity&quot;, width = 0.5) +
  ylab(&quot;GDP in trillions of US dollars&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/barplot-better-than-area-1.png" width="50%" /></p>
</div>
<div id="order-categories-by-a-meaningful-value" class="section level2">
<h2>Order categories by a meaningful value</h2>
<p>When one of the axes is used to show categories, as is done in barplots, the default <strong>ggplot2</strong> behavior is to order the categories alphabetically when they are defined by character strings. If they are defined by factors, they are ordered by the factor levels. We rarely want to use alphabetical order. Instead, we should order by a meaningful quantity. In all the cases above, the barplots were ordered by the values being displayed. The exception was the graph showing barplots comparing browsers. In this case, we kept the order the same across the barplots to ease the comparison. Specifically, instead of ordering the browsers separately in the two years, we ordered both years by the average value of 2000 and 2015.</p>
<p>We previously learned how to use the <code>reorder</code> function, which helps us achieve this goal.
To appreciate how the right order can help convey a message, suppose we want to create a plot to compare the murder rate across states. We are particularly interested in the most dangerous and safest states. Note the difference when we order alphabetically (the default) versus when we order by the actual rate:</p>
<pre class="r"><code>data(murders)
p1 &lt;- murders %&gt;% mutate(murder_rate = total / population * 100000) %&gt;%
  ggplot(aes(state, murder_rate)) +
  geom_bar(stat=&quot;identity&quot;) +
  coord_flip() +
  theme(axis.text.y = element_text(size = 8))  +
  xlab(&quot;&quot;)

p2 &lt;- murders %&gt;% mutate(murder_rate = total / population * 100000) %&gt;%
  mutate(state = reorder(state, murder_rate)) %&gt;%
  ggplot(aes(state, murder_rate)) +
  geom_bar(stat=&quot;identity&quot;) +
  coord_flip() +
  theme(axis.text.y = element_text(size = 8))  +
  xlab(&quot;&quot;)

grid.arrange(p1, p2, ncol = 2)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/do-not-order-alphabetically-1.png" width="672" /></p>
<p>We can make the second plot like this:</p>
<pre class="r"><code>data(murders)
murders %&gt;% mutate(murder_rate = total / population * 100000) %&gt;%
  mutate(state = reorder(state, murder_rate)) %&gt;%
  ggplot(aes(state, murder_rate)) +
  geom_bar(stat=&quot;identity&quot;) +
  coord_flip() +
  theme(axis.text.y = element_text(size = 6)) +
  xlab(&quot;&quot;)</code></pre>
<p>The <code>reorder</code> function lets us reorder groups as well. Earlier we saw an example related to income distributions across regions. Here are the two versions plotted against each other:</p>
<p><img src="/content/02-content-old_files/figure-html/reorder-boxplot-example-1.png" width="100%" /></p>
<p>The first orders the regions alphabetically, while the second orders them by the group’s median.</p>
</div>
<div id="show-the-data" class="section level2">
<h2>Show the data</h2>
<p>We have focused on displaying single quantities across categories. We now shift our attention to displaying data, with a focus on comparing groups.</p>
<p>To motivate our first principle, “show the data”, we go back to our artificial example of describing heights to a person who is unaware of some basic facts about the population of interest (and is otherwise unsophisticated). This time let’s assume that this person is interested in the difference in heights between males and females. A commonly seen plot used for comparisons between groups, popularized by software such as Microsoft Excel, is the dynamite plot, which shows the average and standard errors.<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a> The plot looks like this:</p>
<p><img src="/content/02-content-old_files/figure-html/show-data-1-1.png" width="672" /></p>
<p>The average of each group is represented by the top of each bar and the antennae extend out from the average to the average plus two standard errors. If all ET receives is this plot, he will have little information on what to expect if he meets a group of human males and females. The bars go to 0: does this mean there are tiny humans measuring less than one foot? Are all males taller than the tallest females? Is there a range of heights? ET can’t answer these questions since we have provided almost no information on the height distribution.</p>
<p>This brings us to our first principle: show the data. This simple <strong>ggplot2</strong> code already generates a more informative plot than the barplot by simply showing all the data points:</p>
<pre class="r"><code>heights %&gt;%
  ggplot(aes(sex, height)) +
  geom_point()</code></pre>
<p><img src="/content/02-content-old_files/figure-html/show-data-2-1.png" width="672" /></p>
<p>For example, this plot gives us an idea of the range of the data. However, this plot has limitations as well, since we can’t really see all the 238 and 812 points plotted for females and males, respectively, and many points are plotted on top of each other. As we have previously described, visualizing the distribution is much more informative. But before doing this, we point out two ways we can improve a plot showing all the points.</p>
<p>The first is to add <em>jitter</em>, which adds a small random shift to each point. In this case, adding horizontal jitter does not alter the interpretation, since the point heights do not change, but we minimize the number of points that fall on top of each other and, therefore, get a better visual sense of how the data is distributed. A second improvement comes from using <em>alpha blending</em>: making the points somewhat transparent. The more points fall on top of each other, the darker the plot, which also helps us get a sense of how the points are distributed. Here is the same plot with jitter and alpha blending:</p>
<pre class="r"><code>heights %&gt;%
  ggplot(aes(sex, height)) +
  geom_jitter(width = 0.1, alpha = 0.2)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/show-points-with-jitter-1.png" width="672" /></p>
<p>Now we start getting a sense that, on average, males are taller than females. We also note dark horizontal bands of points, demonstrating that many report values that are rounded to the nearest integer.</p>
</div>
<div id="ease-comparisons" class="section level2">
<h2>Ease comparisons</h2>
<div id="use-common-axes" class="section level3">
<h3>Use common axes</h3>
<p>Since there are so many points, it is more effective to show distributions rather than individual points. We therefore show histograms for each group:</p>
<p><img src="/content/02-content-old_files/figure-html/common-axes-histograms-wrong-1.png" width="672" /></p>
<p>However, from this plot it is not immediately obvious that males are, on average, taller than females. We have to look carefully to notice that the x-axis has a higher range of values in the male histogram. An important principle here is to <strong>keep the axes the same</strong> when comparing data across two plots. Below we see how the comparison becomes easier:</p>
<p><img src="/content/02-content-old_files/figure-html/common-axes-histograms-right-1.png" width="672" /></p>
</div>
<div id="align-plots-vertically-to-see-horizontal-changes-and-horizontally-to-see-vertical-changes" class="section level3">
<h3>Align plots vertically to see horizontal changes and horizontally to see vertical changes</h3>
<p>In these histograms, the visual cue related to decreases or increases in height are shifts to the left or right, respectively: horizontal changes. Aligning the plots vertically helps us see this change when the axes are fixed:</p>
<p><img src="/content/02-content-old_files/figure-html/common-axes-histograms-right-2-1.png" width="672" /></p>
<pre class="r"><code>heights %&gt;%
  ggplot(aes(height, ..density..)) +
  geom_histogram(binwidth = 1, color=&quot;black&quot;) +
  facet_grid(sex~.)</code></pre>
<p>This plot makes it much easier to notice that men are, on average, taller.</p>
<p>If , we want the more compact summary provided by boxplots, we then align them horizontally since, by default, boxplots move up and down with changes in height. Following our <em>show the data</em> principle, we then overlay all the data points:</p>
<p><img src="/content/02-content-old_files/figure-html/boxplot-with-points-with-jitter-1.png" width="672" /></p>
<pre class="r"><code> heights %&gt;%
  ggplot(aes(sex, height)) +
  geom_boxplot(coef=3) +
  geom_jitter(width = 0.1, alpha = 0.2) +
  ylab(&quot;Height in inches&quot;)</code></pre>
<p>Now contrast and compare these three plots, based on exactly the same data:</p>
<p><img src="/content/02-content-old_files/figure-html/show-the-data-comparison-1.png" width="100%" /></p>
<p>Notice how much more we learn from the two plots on the right. Barplots are useful for showing one number, but not very useful when we want to describe distributions.</p>
</div>
<div id="consider-transformations" class="section level3">
<h3>Consider transformations</h3>
<p>We have motivated the use of the log transformation in cases where the changes are multiplicative. Population size was an example in which we found a log transformation to yield a more informative transformation.</p>
<p>The combination of an incorrectly chosen barplot and a failure to use a log transformation when one is merited can be particularly distorting. As an example, consider this barplot showing the average population sizes for each continent in 2015:</p>
<p><img src="/content/02-content-old_files/figure-html/no-transformations-wrong-use-of-barplot-1.png" width="672" /></p>
<p>From this plot, one would conclude that countries in Asia are much more populous than in other continents. Following the <em>show the data</em> principle, we quickly notice that this is due to two very large countries, which we assume are India and China:</p>
<p><img src="/content/02-content-old_files/figure-html/no-transformation-1.png" width="672" /></p>
<p>Using a log transformation here provides a much more informative plot. We compare the original barplot to a boxplot using the log scale transformation for the y-axis:</p>
<p><img src="/content/02-content-old_files/figure-html/correct-transformation-1.png" width="100%" /></p>
<p>With the new plot, we realize that countries in Africa actually have a larger median population size than those in Asia.</p>
<p>Other transformations you should consider are the logistic transformation (<code>logit</code>), useful to better see fold changes in odds, and the square root transformation (<code>sqrt</code>), useful for count data.</p>
</div>
<div id="visual-cues-to-be-compared-should-be-adjacent" class="section level3">
<h3>Visual cues to be compared should be adjacent</h3>
<p>For each continent, let’s compare income in 1970 versus 2010. When comparing income data across regions between 1970 and 2010, we made a figure similar to the one below, but this time we investigate continents rather than regions.</p>
<p><img src="/content/02-content-old_files/figure-html/boxplots-not-adjacent-1.png" width="672" /></p>
<p>The default in <strong>ggplot2</strong> is to order labels alphabetically so the labels with 1970 come before the labels with 2010, making the comparisons challenging because a continent’s distribution in 1970 is visually far from its distribution in 2010. It is much easier to make the comparison between 1970 and 2010 for each continent when the boxplots for that continent are next to each other:</p>
<p><img src="/content/02-content-old_files/figure-html/boxplot-adjacent-comps-1.png" width="672" /></p>
</div>
<div id="use-color" class="section level3">
<h3>Use color</h3>
<p>The comparison becomes even easier to make if we use color to denote the two things we want to compare:</p>
<p><img src="/content/02-content-old_files/figure-html/boxplot-adjacent-comps-with-color-1.png" width="672" /></p>
</div>
</div>
<div id="think-of-the-color-blind" class="section level2">
<h2>Think of the color blind</h2>
<p>About 10% of the population is color blind. Unfortunately, the default colors used in <strong>ggplot2</strong> are not optimal for this group. However, <strong>ggplot2</strong> does make it easy to change the color palette used in the plots. An example of how we can use a color blind friendly palette is described here: <a href="http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/#a-colorblind-friendly-palette">http://www.cookbook-r.com/Graphs/Colors_(ggplot2)/#a-colorblind-friendly-palette</a>:</p>
<pre class="r"><code>color_blind_friendly_cols &lt;-
  c(&quot;#999999&quot;, &quot;#E69F00&quot;, &quot;#56B4E9&quot;, &quot;#009E73&quot;,
    &quot;#F0E442&quot;, &quot;#0072B2&quot;, &quot;#D55E00&quot;, &quot;#CC79A7&quot;)</code></pre>
<p>Here are the colors
<img src="/content/02-content-old_files/figure-html/color-blind-friendly-colors-1.png" width="672" /></p>
<p>From <a href="http://www.pnas.org/content/pnas/early/2017/01/24/1617948114.full.pdf">Seafood Prices Reveal Impacts of a Major Ecological Disturbance</a>:</p>
<p><img src="/content/02-content_files/Colorblind_example.png" /></p>
<p>There are several resources that can help you select colors, for example this one: <a href="http://bconnelly.net/2013/10/creating-colorblind-friendly-figures/">http://bconnelly.net/2013/10/creating-colorblind-friendly-figures/</a>.</p>
</div>
<div id="plots-for-two-variables" class="section level2">
<h2>Plots for two variables</h2>
<p>In general, you should use scatterplots to visualize the relationship between two variables.
In every single instance in which we have examined the relationship between two variables, including total murders versus population size, life expectancy versus fertility rates, and infant mortality versus income, we have used scatterplots. This is the plot we generally recommend. However, there are some exceptions and we describe two alternative plots here: the <em>slope chart</em> and the <em>Bland-Altman plot</em>.</p>
<div id="slope-charts" class="section level3">
<h3>Slope charts</h3>
<p>One exception where another type of plot may be more informative is when you are comparing variables of the same type, but at different time points and for a relatively small number of comparisons. For example, comparing life expectancy between 2010 and 2015. In this case, we might recommend a <em>slope chart</em>.</p>
<p>There is no geometry for slope charts in <strong>ggplot2</strong>, but we can construct one using <code>geom_line</code>. We need to do some tinkering to add labels. Below is an example comparing 2010 to 2015 for large western countries:</p>
<pre class="r"><code>west &lt;- c(&quot;Western Europe&quot;,&quot;Northern Europe&quot;,&quot;Southern Europe&quot;,
          &quot;Northern America&quot;,&quot;Australia and New Zealand&quot;)

dat &lt;- gapminder %&gt;%
  filter(year%in% c(2010, 2015) &amp; region %in% west &amp;
           !is.na(life_expectancy) &amp; population &gt; 10^7)

dat %&gt;%
  mutate(location = ifelse(year == 2010, 1, 2),
         location = ifelse(year == 2015 &amp;
                             country %in% c(&quot;United Kingdom&quot;, &quot;Portugal&quot;),
                           location+0.22, location),
         hjust = ifelse(year == 2010, 1, 0)) %&gt;%
  mutate(year = as.factor(year)) %&gt;%
  ggplot(aes(year, life_expectancy, group = country)) +
  geom_line(aes(color = country), show.legend = FALSE) +
  geom_text(aes(x = location, label = country, hjust = hjust),
            show.legend = FALSE) +
  xlab(&quot;&quot;) + ylab(&quot;Life Expectancy&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/slope-plot-1.png" width="672" /></p>
<p>An advantage of the slope chart is that it permits us to quickly get an idea of changes based on the slope of the lines. Although we are using angle as the visual cue, we also have position to determine the exact values. Comparing the improvements is a bit harder with a scatterplot:</p>
<pre><code>## Warning: package &#39;ggrepel&#39; was built under R version 4.0.4</code></pre>
<p><img src="/content/02-content-old_files/figure-html/scatter-plot-instead-of-slope-1.png" width="672" /></p>
<p>In the scatterplot, we have followed the principle <em>use common axes</em> since we are comparing these before and after. However, if we have many points, slope charts stop being useful as it becomes hard to see all the lines.</p>
</div>
<div id="bland-altman-plot" class="section level3">
<h3>Bland-Altman plot</h3>
<p>Since we are primarily interested in the difference, it makes sense to dedicate one of our axes to it. The Bland-Altman plot, also known as the Tukey mean-difference plot and the MA-plot, shows the difference versus the average:</p>
<pre class="r"><code>library(ggrepel)
dat %&gt;%
  mutate(year = paste0(&quot;life_expectancy_&quot;, year)) %&gt;%
  select(country, year, life_expectancy) %&gt;%
  spread(year, life_expectancy) %&gt;%
  mutate(average = (life_expectancy_2015 + life_expectancy_2010)/2,
         difference = life_expectancy_2015 - life_expectancy_2010) %&gt;%
  ggplot(aes(average, difference, label = country)) +
  geom_point() +
  geom_text_repel() +
  geom_abline(lty = 2) +
  xlab(&quot;Average of 2010 and 2015&quot;) +
  ylab(&quot;Difference between 2015 and 2010&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/bland-altman-1.png" width="672" /></p>
<p>Here, by simply looking at the y-axis, we quickly see which countries have shown the most improvement. We also get an idea of the overall value from the x-axis.</p>
</div>
</div>
<div id="encoding-a-third-variable" class="section level2">
<h2>Encoding a third variable</h2>
<p>An earlier scatterplot showed the relationship between infant survival and average income. Below is a version of this plot that encodes three variables: OPEC membership, region, and population.</p>
<p><img src="/content/02-content-old_files/figure-html/encoding-third-variable-1.png" width="672" /></p>
<p>We encode categorical variables with color and shape. These shapes can be controlled with <code>shape</code> argument. Below are the shapes available for use in R. For the last five, the color goes inside.</p>
<p><img src="/content/02-content-old_files/figure-html/available-shapes-1.png" width="672" /></p>
<p>For continuous variables, we can use color, intensity, or size. We now show an example of how we do this with a case study.</p>
<p>When selecting colors to quantify a numeric variable, we choose between two options: sequential and diverging. Sequential colors are suited for data that goes from high to low. High values are clearly distinguished from low values. Here are some examples offered by the package <code>RColorBrewer</code>:</p>
<pre class="r"><code>library(RColorBrewer)
display.brewer.all(type=&quot;seq&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/r-color-brewer-seq-1.png" width="672" /></p>
<p>Diverging colors are used to represent values that diverge from a center. We put equal emphasis on both ends of the data range: higher than the center and lower than the center. An example of when we would use a divergent pattern would be if we were to show height in standard deviations away from the average. Here are some examples of divergent patterns:</p>
<pre class="r"><code>library(RColorBrewer)
display.brewer.all(type=&quot;div&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/r-color-brewer-div-1.png" width="672" /></p>
</div>
<div id="avoid-pseudo-three-dimensional-plots" class="section level2">
<h2>Avoid pseudo-three-dimensional plots</h2>
<p>The figure below, taken from the scientific literature<a href="#fn12" class="footnote-ref" id="fnref12"><sup>12</sup></a>,
shows three variables: dose, drug type and survival. Although your screen/book page is flat and two-dimensional, the plot tries to imitate three dimensions and assigned a dimension to each variable.</p>
<p><img src="/./02-content_files/fig8b.png" /></p>
<p>(Image courtesy of Karl Broman)</p>
<p>Humans are not good at seeing in three dimensions (which explains why it is hard to parallel park) and our limitation is even worse with regard to pseudo-three-dimensions. To see this, try to determine the values of the survival variable in the plot above. Can you tell when the purple ribbon intersects the red one? This is an example in which we can easily use color to represent the categorical variable instead of using a pseudo-3D:</p>
<pre class="r"><code>##First read data
url &lt;- &quot;https://github.com/kbroman/Talk_Graphs/raw/master/R/fig8dat.csv&quot;
dat &lt;- read.csv(url)

##Now make alternative plot
dat %&gt;% gather(drug, survival, -log.dose) %&gt;%
  mutate(drug = gsub(&quot;Drug.&quot;,&quot;&quot;,drug)) %&gt;%
  ggplot(aes(log.dose, survival, color = drug)) +
  geom_line()</code></pre>
<p><img src="/content/02-content-old_files/figure-html/colors-for-different-lines-1.png" width="672" /></p>
<p>Notice how much easier it is to determine the survival values.</p>
<p>Pseudo-3D is sometimes used completely gratuitously: plots are made to look 3D even when the 3rd dimension does not represent a quantity. This only adds confusion and makes it harder to relay your message. Here are two examples:</p>
<p><img src="/./02-content_files/fig1e.png" />
<img src="/./02-content_files/fig2d.png" /></p>
<p>(Images courtesy of Karl Broman)</p>
</div>
<div id="avoid-too-many-significant-digits" class="section level2">
<h2>Avoid too many significant digits</h2>
<p>By default, statistical software like R returns many significant digits. The default behavior in R is to show 7 significant digits. That many digits often adds no information and the added visual clutter can make it hard for the viewer to understand the message. As an example, here are the per 10,000 disease rates, computed from totals and population in R, for California across the five decades:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
Measles
</th>
<th style="text-align:right;">
Pertussis
</th>
<th style="text-align:right;">
Polio
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1940
</td>
<td style="text-align:right;">
37.8826320
</td>
<td style="text-align:right;">
18.3397861
</td>
<td style="text-align:right;">
0.8266512
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1950
</td>
<td style="text-align:right;">
13.9124205
</td>
<td style="text-align:right;">
4.7467350
</td>
<td style="text-align:right;">
1.9742639
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
14.1386471
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.2640419
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1970
</td>
<td style="text-align:right;">
0.9767889
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
0.3743467
</td>
<td style="text-align:right;">
0.0515466
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
<p>We are reporting precision up to 0.00001 cases per 10,000, a very small value in the context of the changes that are occurring across the dates. In this case, two significant figures is more than enough and clearly makes the point that rates are decreasing:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
Measles
</th>
<th style="text-align:right;">
Pertussis
</th>
<th style="text-align:right;">
Polio
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1940
</td>
<td style="text-align:right;">
37.9
</td>
<td style="text-align:right;">
18.3
</td>
<td style="text-align:right;">
0.8
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1950
</td>
<td style="text-align:right;">
13.9
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
2.0
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
14.1
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.3
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1970
</td>
<td style="text-align:right;">
1.0
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:right;">
1980
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:right;">
0.1
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
<p>Useful ways to change the number of significant digits or to round numbers are <code>signif</code> and <code>round</code>. You can define the number of significant digits globally by setting options like this: <code>options(digits = 3)</code>.</p>
<p>Another principle related to displaying tables is to place values being compared on columns rather than rows. Note that our table above is easier to read than this one:</p>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
state
</th>
<th style="text-align:left;">
disease
</th>
<th style="text-align:right;">
1940
</th>
<th style="text-align:right;">
1950
</th>
<th style="text-align:right;">
1960
</th>
<th style="text-align:right;">
1970
</th>
<th style="text-align:right;">
1980
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:left;">
Measles
</td>
<td style="text-align:right;">
37.9
</td>
<td style="text-align:right;">
13.9
</td>
<td style="text-align:right;">
14.1
</td>
<td style="text-align:right;">
1
</td>
<td style="text-align:right;">
0.4
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:left;">
Pertussis
</td>
<td style="text-align:right;">
18.3
</td>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
0.1
</td>
</tr>
<tr>
<td style="text-align:left;">
California
</td>
<td style="text-align:left;">
Polio
</td>
<td style="text-align:right;">
0.8
</td>
<td style="text-align:right;">
2.0
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<div id="know-your-audience" class="section level2">
<h2>Know your audience</h2>
<p>Graphs can be used for 1) our own exploratory data analysis, 2) to convey a message to experts, or 3) to help tell a story to a general audience. Make sure that the intended audience understands each element of the plot.</p>
<p>As a simple example, consider that for your own exploration it may be more useful to log-transform data and then plot it. However, for a general audience that is unfamiliar with converting logged values back to the original measurements, using a log-scale for the axis instead of log-transformed values will be much easier to digest.</p>
<div class="fyi">
<p><strong>TRY IT</strong></p>
<p>For these exercises, we will be using the vaccines data in the <strong>dslabs</strong> package:</p>
<pre class="r"><code>library(dslabs)
data(us_contagious_diseases)</code></pre>
<ol style="list-style-type: decimal">
<li>Pie charts are appropriate:</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>When we want to display percentages.</li>
<li>When <strong>ggplot2</strong> is not available.</li>
<li>When I am in a bakery.</li>
<li>Never. Barplots and tables are always better.</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>What is the problem with the plot below:</li>
</ol>
<p><img src="/content/02-content-old_files/figure-html/baplot-not-from-zero-exercises-1.png" width="672" /></p>
<ol style="list-style-type: lower-alpha">
<li>The values are wrong. The final vote was 306 to 232.</li>
<li>The axis does not start at 0. Judging by the length, it appears Trump received 3 times as many votes when, in fact, it was about 30% more.</li>
<li>The colors should be the same.</li>
<li>Percentages should be shown as a pie chart.</li>
</ol>
<ol start="3" style="list-style-type: decimal">
<li>Take a look at the following two plots. They show the same information: 1928 rates of measles across the 50 states.</li>
</ol>
<p><img src="/content/02-content-old_files/figure-html/measels-exercise-1.png" width="672" />
Which plot is easier to read if you are interested in determining which are the best and worst states in terms of rates, and why?</p>
<ol style="list-style-type: lower-alpha">
<li>They provide the same information, so they are both equally as good.</li>
<li>The plot on the right is better because it orders the states alphabetically.</li>
<li>The plot on the right is better because alphabetical order has nothing to do with the disease and by ordering according to actual rate, we quickly see the states with most and least rates.</li>
<li>Both plots should be a pie chart.</li>
</ol>
<ol start="4" style="list-style-type: decimal">
<li>To make the plot on the left, we have to reorder the levels of the states’ variables.</li>
</ol>
<pre class="r"><code>dat &lt;- us_contagious_diseases %&gt;%
  filter(year == 1967 &amp; disease==&quot;Measles&quot; &amp; !is.na(population)) %&gt;%
  mutate(rate = count / population * 10000 * 52 / weeks_reporting)</code></pre>
<p>Note what happens when we make a barplot:</p>
<pre class="r"><code>dat %&gt;% ggplot(aes(state, rate)) +
  geom_bar(stat=&quot;identity&quot;) +
  coord_flip()</code></pre>
<p><img src="/content/02-content-old_files/figure-html/barplot-plot-exercise-example-1.png" width="672" /></p>
<p>Define these objects:</p>
<pre class="r"><code>state &lt;- dat$state
rate &lt;- dat$count/dat$population*10000*52/dat$weeks_reporting</code></pre>
<p>Redefine the <code>state</code> object so that the levels are re-ordered. Print the new object <code>state</code> and its levels so you can see that the vector is not re-ordered by the levels.</p>
<ol start="5" style="list-style-type: decimal">
<li><p>Now with one line of code, define the <code>dat</code> table as done above, but change the use mutate to create a rate variable and re-order the state variable so that the levels are re-ordered by this variable. Then make a barplot using the code above, but for this new <code>dat</code>.</p></li>
<li><p>Say we are interested in comparing gun homicide rates across regions of the US. We see this plot:</p></li>
</ol>
<pre class="r"><code>library(dslabs)
data(&quot;murders&quot;)
murders %&gt;% mutate(rate = total/population*100000) %&gt;%
group_by(region) %&gt;%
summarize(avg = mean(rate)) %&gt;%
mutate(region = factor(region)) %&gt;%
ggplot(aes(region, avg)) +
geom_bar(stat=&quot;identity&quot;) +
ylab(&quot;Murder Rate Average&quot;)</code></pre>
<p><img src="/content/02-content-old_files/figure-html/us-murders-barplot-1.png" width="672" /></p>
<p>and decide to move to a state in the western region. What is the main problem with this interpretation?</p>
<ol style="list-style-type: lower-alpha">
<li>The categories are ordered alphabetically.</li>
<li>The graph does not show standarad errors.</li>
<li>It does not show all the data. We do not see the variability within a region and it’s possible that the safest states are not in the West.</li>
<li>The Northeast has the lowest average.</li>
</ol>
<ol start="7" style="list-style-type: decimal">
<li>Make a boxplot of the murder rates defined as</li>
</ol>
<pre class="r"><code>data(&quot;murders&quot;)
murders %&gt;% mutate(rate = total/population*100000)</code></pre>
<p>by region, showing all the points and ordering the regions by their median rate.</p>
<ol start="8" style="list-style-type: decimal">
<li>The plots below show three continuous variables.</li>
</ol>
<p><img src="/content/02-content-old_files/figure-html/pseudo-3d-exercise-1.png" width="672" /></p>
<p>The line <span class="math inline">\(x=2\)</span> appears to separate the points. But it is actually not the case, which we can see by plotting the data in a couple of two-dimensional points.</p>
<p><img src="/content/02-content-old_files/figure-html/pseud-3d-exercise-2-1.png" width="672" /></p>
<p>Why is this happening?</p>
<ol style="list-style-type: lower-alpha">
<li>Humans are not good at reading pseudo-3D plots.</li>
<li>There must be an error in the code.</li>
<li>The colors confuse us.</li>
<li>Scatterplots should not be used to compare two variables when we have access to 3.</li>
</ol>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>Keep in mind that discrete numeric data can be considered ordinal. Although this is technically true, we usually reserve the term ordinal data for variables belonging to a small number of different groups, with each group having many members. In contrast, when we have many groups with few cases in each group, we typically refer to them as discrete numerical variables. So, for example, the number of packs of cigarettes a person smokes a day, rounded to the closest pack, would be considered ordinal, while the actual number of cigarettes would be considered a numerical variable. But, indeed, there are examples that can be considered both numerical and ordinal when it comes to visualizing data.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>We provide a detailed explanation of outliers later.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="http://kbroman.org/" class="uri">http://kbroman.org/</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://www.biostat.wisc.edu/~kbroman/presentations/graphs2017.pdf" class="uri">https://www.biostat.wisc.edu/~kbroman/presentations/graphs2017.pdf</a><a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="https://github.com/kbroman/Talk_Graphs" class="uri">https://github.com/kbroman/Talk_Graphs</a><a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p><a href="http://paldhous.github.io/ucb/2016/dataviz/index.html" class="uri">http://paldhous.github.io/ucb/2016/dataviz/index.html</a><a href="#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p><a href="http://mediamatters.org/blog/2013/04/05/fox-news-newest-dishonest-chart-immigration-enf/193507" class="uri">http://mediamatters.org/blog/2013/04/05/fox-news-newest-dishonest-chart-immigration-enf/193507</a><a href="#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p><a href="http://flowingdata.com/2012/08/06/fox-news-continues-charting-excellence/" class="uri">http://flowingdata.com/2012/08/06/fox-news-continues-charting-excellence/</a><a href="#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p><a href="https://www.pakistantoday.com.pk/2018/05/18/whats-at-stake-in-venezuelan-presidential-vote" class="uri">https://www.pakistantoday.com.pk/2018/05/18/whats-at-stake-in-venezuelan-presidential-vote</a><a href="#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p><a href="https://www.youtube.com/watch?v=kl2g40GoRxg" class="uri">https://www.youtube.com/watch?v=kl2g40GoRxg</a><a href="#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>If you’re unfamiliar, standard errors are defined later in the course—do not confuse them with the standard deviation of the data.<a href="#fnref11" class="footnote-back">↩︎</a></p></li>
<li id="fn12"><p><a href="https://projecteuclid.org/download/pdf_1/euclid.ss/1177010488" class="uri">https://projecteuclid.org/download/pdf_1/euclid.ss/1177010488</a><a href="#fnref12" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

                    </div>

                    



                    
                </div>

                <div class="body-footer">
                    <p>Last updated on August 20, 2021</p>

                    


                    

                </div>

            </article>

            <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>SSC 442: Data Analytics (Spring Semester 2021)</strong><br>

                <a href="https://www.msu.edu" target="_blank" rel="noopener">Michigan State University</a> &emsp;&emsp;
                <a href="https://socialscience.msu.edu/" target="_blank" rel="noopener">College of Social Science</a>
            </p>

            <p>
                <a href="https://www.justinkirkpatrick.com" target="_blank" rel="noopener"><i class="fas fa-user"></i>
                    Prof. Justin Kirkpatrick</a> &emsp;&emsp;
                <a href="mailto:jkirk@msu.edu"><i class="fas fa-envelope"></i>
                    jkirk@msu.edu</a>
            </p>

            <p>
                <i class="far fa-calendar-alt"></i> Tuesday and Thursday &emsp;&emsp;
                <i class="far fa-clock"></i> 1:00pm - 2:20pm 
                
            </p>
        </div>

        <div class="col-md-5 credits">
            <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</p>
            
            <p>Content <i class="fab fa-creative-commons"></i> 2020-21 <a href="https://www.justinkirkpatrick.com" target="_blank" rel="noopener">Ben Bushong; Justin Kirkpatrick</a></p>
        
            <p>This site created with the <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> in <a href="https://bookdown.org/yihui/blogdown/" target="_blank" rel="noopener">blogdown</a> and <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>. </p>
            
            <p><a href="https://github.com/" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>


        </main>
    </div>
</div>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.6f7ce8be710290b8c431bbc97f405d15.js"></script>

    



    
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
