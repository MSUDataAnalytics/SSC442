<!DOCTYPE html>
<html lang="en-us" 
      xmlns:og="http://ogp.me/ns#" 
      xmlns:fb="https://www.facebook.com/2008/fbml">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.8.0">

  

  
  
  
  
  
    
    
    
  
  

  <meta name="author" content="Ben Bushong">

  
  
  
    
  
  <meta name="description" content="Required Reading Supplemental Readings For “Fun” Guiding Questions Slides  Data visualization in practice Case study: new insights on poverty Exploring the Data  Scatterplots Faceting facet_wrap Fixed scales for better comparisons  Time series plots Labels instead of legends  Data transformations Log transformation Which base? Transform the values or the scale?  Visualizing multimodal distributions Comparing multiple distributions with boxplots and ridge plots Boxplots Ridge plots Example: 1970 versus 2010 income distributions Accessing computed variables Weighted densities  The ecological fallacy and importance of showing the data Logistic transformation Show the data  Case study: vaccines and infectious diseases    Required Reading  This page.">

  
  <link rel="alternate" hreflang="en-us" href="/content/03-content/">

  


  
  
  
  <meta name="theme-color" content="#18453B">
  

  
  
  
  <script src="/js/mathjax-config.js"></script>
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.0-1/css/all.min.css" integrity="sha256-4w9DunooKSr3MFXHXWyFER38WmPdm361bQS/2KUWZbU=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

    
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.1.2/lazysizes.min.js" integrity="sha256-Md1qLToewPeKjfAHU1zyPwOutccPAm5tahnaw7Osw0A=" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    
      

      
      

      
    
      

      
      

      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js" integrity="" crossorigin="anonymous" async></script>
      
    
      

      
      

      
    

  

  
  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Fira+Sans+Condensed:400,400i,700,700i%7COverpass:400,400i,700,700i&display=swap">
  

  
  
  
  
  <link rel="stylesheet" href="/css/academic.css">

  




  


  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_32x32_fill_lanczos_center_2.png">
  <link rel="apple-touch-icon" type="image/png" href="/images/icon_hu0b7a4cb9992c9ac0e91bd28ffd38dd00_9727_192x192_fill_lanczos_center_2.png">

  <link rel="canonical" href="/content/03-content/">

  
  
  
  
  
  
  
    
  
  
  <meta property="twitter:card" content="summary_large_image">
  
  <meta property="twitter:site" content="@benbushong">
  <meta property="twitter:creator" content="@benbushong">
  
  <meta property="og:site_name" content="Data Analytics">
  <meta property="og:url" content="/content/03-content/">
  <meta property="og:title" content="Visualizations in Practice | Data Analytics">
  <meta property="og:description" content="Required Reading Supplemental Readings For “Fun” Guiding Questions Slides  Data visualization in practice Case study: new insights on poverty Exploring the Data  Scatterplots Faceting facet_wrap Fixed scales for better comparisons  Time series plots Labels instead of legends  Data transformations Log transformation Which base? Transform the values or the scale?  Visualizing multimodal distributions Comparing multiple distributions with boxplots and ridge plots Boxplots Ridge plots Example: 1970 versus 2010 income distributions Accessing computed variables Weighted densities  The ecological fallacy and importance of showing the data Logistic transformation Show the data  Case study: vaccines and infectious diseases    Required Reading  This page."><meta property="og:image" content="/img/social-image.png">
  <meta property="twitter:image" content="/img/social-image.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2020-09-22T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2020-09-22T09:56:34-04:00">
  

  



  


  


  <link rel="shortcut icon" href="/favicon.ico" />
  <link rel="apple-touch-icon-precomposed" sizes="57x57" href="/img/apple-touch-icon-57x57.png" />
  <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/img/apple-touch-icon-114x114.png" />
  <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/img/apple-touch-icon-72x72.png" />
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/img/apple-touch-icon-144x144.png" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="/img/apple-touch-icon-120x120.png" />
  <link rel="apple-touch-icon-precomposed" sizes="152x152" href="/img/apple-touch-icon-152x152.png" />
  <link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32" />
  <link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16" />
  <meta name="application-name" content="SSC 442: Data Analytics" />
  <meta name="msapplication-TileColor" content="#FFFFFF" />
  <meta name="msapplication-TileImage" content="/img/mstile-144x144.png" />


  <title>Visualizations in Practice | Data Analytics</title>

</head>


<body id="top" data-spy="scroll" data-offset="70"
    data-target="#TableOfContents"
    >

    <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


    







<nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
    <div class="d-none d-lg-inline-flex">
      <a class="navbar-brand" href="/">Data Analytics</a>
    </div>
    

    
    <button type="button" class="navbar-toggler" data-toggle="collapse"
            data-target="#navbar-content" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span><i class="fas fa-bars"></i></span>
    </button>
    

    
    <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
      <a class="navbar-brand" href="/">Data Analytics</a>
    </div>
    

    
    
    <div class="navbar-collapse main-menu-item collapse justify-content-end" id="navbar-content">

      
      <ul class="navbar-nav d-md-inline-flex">
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/syllabus/"><span>Syllabus</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/schedule/"><span>Schedule</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link  active" href="/content/"><span>Content</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/example/"><span>Examples</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="/assignment/"><span>Assignments</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://ssc442.slack.com" target="_blank" rel="noopener"><span><i class="fab fa-slack"></i></span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://www.twitch.tv/benbushong" target="_blank" rel="noopener"><span><i class="fab fa-twitch"></i></span></a>
        </li>

        
        

      

        
      </ul>
    </div>

    <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">
      

      

      

    </ul>

  </div>
</nav>


    

<div class="container-fluid docs">
    <div class="row flex-xl-nowrap">
        <div class="col-12 col-md-3 col-xl-2 docs-sidebar">
            





  
    
  




<form class="docs-search d-flex align-items-center">
  <button class="btn docs-toggle d-md-none p-0 mr-3" type="button" data-toggle="collapse" data-target="#docs-nav" aria-controls="docs-nav" aria-expanded="false" aria-label="Toggle section navigation">
    <span><i class="fas fa-bars"></i></span>
  </button>

  
</form>

<nav class="collapse docs-links" id="docs-nav">
  

  
  
  
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/content/">Readings, lectures, and videos</a>

  </div>
  
  <div class="docs-toc-item">
    <a class="docs-toc-link" href="/content/00-content/">Course content</a>
    <ul class="nav docs-sidenav">
      
      <li >
        <a href="/content/00-content/">0: Introduction to R</a>
      </li>
      
      <li >
        <a href="/content/01-content/">1: The Tidyverse</a>
      </li>
      
      <li >
        <a href="/content/02-content/">2: Visualization</a>
      </li>
      
      <li class="active">
        <a href="/content/03-content/">3: Visualization II</a>
      </li>
      
      <li >
        <a href="/content/04-content/">4: Uncertainty</a>
      </li>
      
      <li >
        <a href="/content/05-content/">5: Linear Regression I</a>
      </li>
      
      <li >
        <a href="/content/06-content/">6: Linear Regression II</a>
      </li>
      
      <li >
        <a href="/content/07-content/">7: Linear Regression III</a>
      </li>
      
    </ul>
    

  </div>
  
  
</nav>

        </div>

        

        <main class="col-12 col-md-9 col-xl-8 py-md-3 pl-md-5 docs-content" role="main">

            <article class="article">

                <div class="docs-article-container">
                    <h1>Visualizations in Practice</h1>

                    

                    
                    <div class="due-date p-2 mb-3 bg-content text-white">
                        Content for Tuesday, September 22, 2020
                    </div>
                    

                    

                    <div class="article-style">
                        
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />

<div id="TOC">
<ul>
<li><a href="#required-reading">Required Reading</a><ul>
<li><a href="#supplemental-readings">Supplemental Readings</a></li>
<li><a href="#for-fun">For “Fun”</a></li>
<li><a href="#guiding-questions">Guiding Questions</a></li>
<li><a href="#slides">Slides</a></li>
</ul></li>
<li><a href="#gapminder">Data visualization in practice</a><ul>
<li><a href="#case-study-new-insights-on-poverty">Case study: new insights on poverty</a><ul>
<li><a href="#exploring-the-data">Exploring the Data</a></li>
</ul></li>
<li><a href="#scatterplots">Scatterplots</a></li>
<li><a href="#faceting">Faceting</a><ul>
<li><a href="#facet_wrap"><code>facet_wrap</code></a></li>
<li><a href="#fixed-scales-for-better-comparisons">Fixed scales for better comparisons</a></li>
</ul></li>
<li><a href="#time-series-plots">Time series plots</a><ul>
<li><a href="#labels-instead-of-legends">Labels instead of legends</a></li>
</ul></li>
<li><a href="#data-transformations">Data transformations</a><ul>
<li><a href="#log-transformation">Log transformation</a></li>
<li><a href="#which-base">Which base?</a></li>
<li><a href="#transform-the-values-or-the-scale">Transform the values or the scale?</a></li>
</ul></li>
<li><a href="#visualizing-multimodal-distributions">Visualizing multimodal distributions</a></li>
<li><a href="#comparing-multiple-distributions-with-boxplots-and-ridge-plots">Comparing multiple distributions with boxplots and ridge plots</a><ul>
<li><a href="#boxplots">Boxplots</a></li>
<li><a href="#ridge-plots">Ridge plots</a></li>
<li><a href="#example-1970-versus-2010-income-distributions">Example: 1970 versus 2010 income distributions</a></li>
<li><a href="#accessing-computed-variables">Accessing computed variables</a></li>
<li><a href="#weighted-densities">Weighted densities</a></li>
</ul></li>
<li><a href="#the-ecological-fallacy-and-importance-of-showing-the-data">The ecological fallacy and importance of showing the data</a><ul>
<li><a href="#logit">Logistic transformation</a></li>
<li><a href="#show-the-data">Show the data</a></li>
</ul></li>
<li><a href="#vaccines">Case study: vaccines and infectious diseases</a></li>
</ul></li>
</ul>
</div>

<div id="required-reading" class="section level2">
<h2>Required Reading</h2>
<ul>
<li>This page.</li>
</ul>
<div id="supplemental-readings" class="section level3">
<h3>Supplemental Readings</h3>
<ul>
<li><i class="fas fa-book"></i> <a href="https://serialmentor.com/dataviz/visualizing-amounts.html">Chapter 6</a> in Claus Wilke, <em>Fundamentals of Data Visualization</em> <span class="citation">[@Wilke:2018]</span></li>
<li><i class="fas fa-book"></i> Chapter 6 in Alberto Cairo, <em>The Truthful Art</em> <span class="citation">[@Cairo:2016]</span></li>
<li><i class="fas fa-book"></i> <a href="https://serialmentor.com/dataviz/visualizing-proportions.html">Chapter 10</a> in Claus Wilke, <em>Fundamentals of Data Visualization</em> <span class="citation">[@Wilke:2018]</span></li>
<li><i class="fas fa-external-link-square-alt"></i> <a href="https://eagereyes.org/blog/2008/engaging-readers-with-square-pie-waffle-charts">Engaging Readers with Square Pie/Waffle Charts</a></li>
<li><i class="fas fa-external-link-square-alt"></i> <a href="https://eagereyes.org/techniques/pie-charts">Understanding Pie Charts</a></li>
<li><i class="fas fa-external-link-square-alt"></i> <a href="https://flowingdata.com/2016/07/15/square-pie-chart-beats-out-the-rest-in-perception-study/">Square pie chart beats out the rest in perception study</a></li>
<li><i class="fab fa-twitter"></i> <a href="https://twitter.com/janinegibson/status/1244519429825802240">Twitter thread</a> from John Burn-Murdoch on why the <em>Financial Times</em> uses log scales in their COVID-19 tracking charts</li>
<li><i class="fab fa-twitter"></i> <a href="https://twitter.com/jburnmurdoch/status/1238914490772701185">Tweet</a> and <a href="https://twitter.com/jburnmurdoch/status/1242904596856614912">Twitter thread</a> from John Burn-Murdoch on why the <em>Financial Times</em> doesn’t use population-adjusted numbers in their COVID-19 tracking charts</li>
</ul>
</div>
<div id="for-fun" class="section level3">
<h3>For “Fun”</h3>
<ul>
<li><i class="fas fa-external-link-square-alt"></i> <a href="https://robjhyndman.com/hyndsight/logratios-covid19/">See how to create your own COVID-19 tracking chart with R</a></li>
</ul>
</div>
<div id="guiding-questions" class="section level3">
<h3>Guiding Questions</h3>
<ul>
<li>How do these types of visualizations help or hinder our search for truth in data?</li>
<li>What is the appropriate visualization technique for the pandemic? Should we use population-adjusted numbers? Why or why not?</li>
</ul>
</div>
<div id="slides" class="section level3">
<h3>Slides</h3>
<p>As with last week, today’s lecture will ask you to work with real data during the lecture. Moreover, we will again avoid slides entirely. To follow along, please have <code>R</code> open throughout lecture and work through this reading on your own time to lock in some of the key concepts.</p>
</div>
</div>
<div id="gapminder" class="section level1">
<h1>Data visualization in practice</h1>
<p>In this chapter, we will demonstrate how relatively simple <strong>ggplot2</strong> code can create insightful and aesthetically pleasing plots. As motivation we will create plots that help us better understand trends in world health and economics. We will implement what we learned in previous sections of the class and learn how to augment the code to perfect the plots. As we go through our case study, we will describe relevant general data visualization principles and learn concepts such as <em>faceting</em>, <em>time series plots</em>, <em>transformations</em>, and <em>ridge plots</em>.</p>
<div id="case-study-new-insights-on-poverty" class="section level2">
<h2>Case study: new insights on poverty</h2>
<p>Hans Rosling<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> was the co-founder of the Gapminder Foundation<a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a>, an organization dedicated to educating the public by using data to dispel common myths about the so-called developing world. The organization uses data to show how actual trends in health and economics contradict the narratives that emanate from sensationalist media coverage of catastrophes, tragedies, and other unfortunate events. As stated in the Gapminder Foundation’s website:</p>
<blockquote>
<p>Journalists and lobbyists tell dramatic stories. That’s their job. They tell stories about extraordinary events and unusual people. The piles of dramatic stories pile up in peoples’ minds into an over-dramatic worldview and strong negative stress feelings: “The world is getting worse!”, “It’s we vs. them!”, “Other people are strange!”, “The population just keeps growing!” and “Nobody cares!”</p>
</blockquote>
<p>Hans Rosling conveyed actual data-based trends in a dramatic way of his own, using effective data visualization. This section is based on two talks that exemplify this approach to education: [New Insights on Poverty]<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> and The Best Stats You’ve Ever Seen<a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>. Specifically, in this section, we use data to attempt to answer the following two questions:</p>
<ol style="list-style-type: decimal">
<li>Is it a fair characterization of today’s world to say it is divided into western rich nations and the developing world in Africa, Asia, and Latin America?</li>
<li>Has income inequality across countries worsened during the last 40 years?</li>
</ol>
<p>To answer these questions, we will be using the <code>gapminder</code> dataset provided in <strong>dslabs</strong>. This dataset was created using a number of spreadsheets available from the Gapminder Foundation. You can access the table like this:</p>
<pre class="r"><code>library(tidyverse)
library(dslabs)
library(ggrepel)
data(gapminder)
gapminder %&gt;% as_tibble()</code></pre>
<pre><code>## # A tibble: 10,545 x 9
##    country  year infant_mortality life_expectancy fertility population      gdp
##    &lt;fct&gt;   &lt;int&gt;            &lt;dbl&gt;           &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;    &lt;dbl&gt;
##  1 Albania  1960            115.             62.9      6.19    1636054 NA      
##  2 Algeria  1960            148.             47.5      7.65   11124892  1.38e10
##  3 Angola   1960            208              36.0      7.32    5270844 NA      
##  4 Antigu…  1960             NA              63.0      4.43      54681 NA      
##  5 Argent…  1960             59.9            65.4      3.11   20619075  1.08e11
##  6 Armenia  1960             NA              66.9      4.55    1867396 NA      
##  7 Aruba    1960             NA              65.7      4.82      54208 NA      
##  8 Austra…  1960             20.3            70.9      3.45   10292328  9.67e10
##  9 Austria  1960             37.3            68.8      2.7     7065525  5.24e10
## 10 Azerba…  1960             NA              61.3      5.57    3897889 NA      
## # … with 10,535 more rows, and 2 more variables: continent &lt;fct&gt;, region &lt;fct&gt;</code></pre>
<div id="exploring-the-data" class="section level3">
<h3>Exploring the Data</h3>
<p>Taking an exercise from the <em>New Insights on Poverty</em> video, we start by testing our knowledge regarding differences in child mortality across different countries. For each of the six pairs of countries below, which country do you think had the highest child mortality rates in 2015? Which pairs do you think are most similar?</p>
<ol style="list-style-type: decimal">
<li>Sri Lanka or Turkey</li>
<li>Poland or South Korea</li>
<li>Malaysia or Russia</li>
<li>Pakistan or Vietnam</li>
<li>Thailand or South Africa</li>
</ol>
<p>When answering these questions without data, the non-European countries are typically picked as having higher child mortality rates: Sri Lanka over Turkey, South Korea over Poland, and Malaysia over Russia. It is also common to assume that countries considered to be part of the developing world: Pakistan, Vietnam, Thailand, and South Africa, have similarly high mortality rates.</p>
<p>To answer these questions <strong>with data</strong>, we can use <strong>dplyr</strong>. For example, for the first comparison we see that:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year == 2015 &amp; country %in% c(&quot;Sri Lanka&quot;,&quot;Turkey&quot;)) %&gt;%
  select(country, infant_mortality)</code></pre>
<pre><code>##     country infant_mortality
## 1 Sri Lanka              8.4
## 2    Turkey             11.6</code></pre>
<p>Turkey has the higher infant mortality rate.</p>
<p>We can use this code on all comparisons and find the following:</p>
<pre><code>## New names:
## * country -&gt; country...1
## * infant_mortality -&gt; infant_mortality...2
## * country -&gt; country...3
## * infant_mortality -&gt; infant_mortality...4</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
infant mortality
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
infant mortality
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Sri Lanka
</td>
<td style="text-align:right;">
8.4
</td>
<td style="text-align:left;">
Turkey
</td>
<td style="text-align:right;">
11.6
</td>
</tr>
<tr>
<td style="text-align:left;">
Poland
</td>
<td style="text-align:right;">
4.5
</td>
<td style="text-align:left;">
South Korea
</td>
<td style="text-align:right;">
2.9
</td>
</tr>
<tr>
<td style="text-align:left;">
Malaysia
</td>
<td style="text-align:right;">
6.0
</td>
<td style="text-align:left;">
Russia
</td>
<td style="text-align:right;">
8.2
</td>
</tr>
<tr>
<td style="text-align:left;">
Pakistan
</td>
<td style="text-align:right;">
65.8
</td>
<td style="text-align:left;">
Vietnam
</td>
<td style="text-align:right;">
17.3
</td>
</tr>
<tr>
<td style="text-align:left;">
Thailand
</td>
<td style="text-align:right;">
10.5
</td>
<td style="text-align:left;">
South Africa
</td>
<td style="text-align:right;">
33.6
</td>
</tr>
</tbody>
</table>
<p>We see that the European countries on this list have higher child mortality rates: Poland has a higher rate than South Korea, and Russia has a higher rate than Malaysia. We also see that Pakistan has a much higher rate than Vietnam, and South Africa has a much higher rate than Thailand. It turns out that when Hans Rosling gave this quiz to educated groups of people, the average score was less than 2.5 out of 5, worse than what they would have obtained had they guessed randomly. This implies that more than ignorant, we are misinformed. In this chapter we see how data visualization helps inform us.</p>
</div>
</div>
<div id="scatterplots" class="section level2">
<h2>Scatterplots</h2>
<p>The reason for this stems from the preconceived notion that the world is divided into two groups: the western world (Western Europe and North America), characterized by long life spans and small families, versus the developing world (Africa, Asia, and Latin America) characterized by short life spans and large families. But do the data support this dichotomous view?</p>
<p>The necessary data to answer this question is also available in our <code>gapminder</code> table. Using our newly learned data visualization skills, we will be able to tackle this challenge.</p>
<p>In order to analyze this world view, our first plot is a scatterplot of life expectancy versus fertility rates (average number of children per woman). We start by looking at data from about 50 years ago, when perhaps this view was first cemented in our minds.</p>
<pre class="r"><code>filter(gapminder, year == 1962) %&gt;%
  ggplot(aes(fertility, life_expectancy)) +
  geom_point()</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-versus-life-expectancy-1962-1.png" width="672" /></p>
<p>Most points fall into two distinct categories:</p>
<ol style="list-style-type: decimal">
<li>Life expectancy around 70 years and 3 or fewer children per family.</li>
<li>Life expectancy lower than 65 years and more than 5 children per family.</li>
</ol>
<p>To confirm that indeed these countries are from the regions we expect, we can use color to represent continent.</p>
<pre class="r"><code>filter(gapminder, year == 1962) %&gt;%
  ggplot( aes(fertility, life_expectancy, color = continent)) +
  geom_point()</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-versus-life-expectancy-1962-with-color-1.png" width="672" /></p>
<p>In 1962, the notion of “the West versus developing world” view was grounded in some reality. Is this still the case 50 years later? How might visualizations help us learn something? Before continuing, make a note of your prior beliefs.</p>
</div>
<div id="faceting" class="section level2">
<h2>Faceting</h2>
<p>We could easily plot the 2012 data in the same way we did for 1962. To make comparisons, however, side by side plots are preferable. In <strong>ggplot2</strong>, we can achieve this by <em>faceting</em> variables: we stratify the data by some variable and make the same plot for each strata.</p>
<p>To achieve faceting, we add a layer with the function <code>facet_grid</code>, which automatically separates the plots. This function lets you facet by up to two variables using columns to represent one variable and rows to represent the other. The function expects the row and column variables to be separated by a <code>~</code>. Here is an example of a scatterplot with <code>facet_grid</code> added as the last layer:</p>
<pre class="r"><code>filter(gapminder, year%in%c(1962, 2012)) %&gt;%
  ggplot(aes(fertility, life_expectancy, col = continent)) +
  geom_point() +
  facet_grid(continent~year)</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-versus-life-expectancy-facet-1.png" width="100%" /></p>
<p>We see a plot for each continent/year pair. However, this is just an example and more than what we want, which is simply to compare 1962 and 2012. In this case, there is just one variable and we use <code>.</code> to let facet know that we are not using one of the variables:</p>
<pre class="r"><code>filter(gapminder, year%in%c(1962, 2012)) %&gt;%
  ggplot(aes(fertility, life_expectancy, col = continent)) +
  geom_point() +
  facet_grid(. ~ year)</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-versus-life-expectancy-two-years-1.png" width="100%" /></p>
<p>This plot clearly shows that the majority of countries have moved from the <em>developing world</em> cluster to the <em>western world</em> one. In 2012, the western versus developing world view no longer makes sense. This is particularly clear when comparing Europe to Asia, the latter of which includes several countries that have made great improvements.</p>
<div id="facet_wrap" class="section level3">
<h3><code>facet_wrap</code></h3>
<p>To explore how this transformation happened through the years, we can make the plot for several years. For example, we can add 1970, 1980, 1990, and 2000. If we do this, we will not want all the plots on the same row, the default behavior of <code>facet_grid</code>, since they will become too thin to show the data. Instead, we will want to use multiple rows and columns. The function <code>facet_wrap</code> permits us to do this by automatically wrapping the series of plots so that each display has viewable dimensions:</p>
<pre class="r"><code>years &lt;- c(1962, 1980, 1990, 2000, 2012)
continents &lt;- c(&quot;Europe&quot;, &quot;Asia&quot;)
gapminder %&gt;%
  filter(year %in% years &amp; continent %in% continents) %&gt;%
  ggplot( aes(fertility, life_expectancy, col = continent)) +
  geom_point() +
  facet_wrap(~year)</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-versus-life-expectancy-five-years-1.png" width="100%" /></p>
<p>This plot clearly shows how most Asian countries have improved at a much faster rate than European ones.</p>
</div>
<div id="fixed-scales-for-better-comparisons" class="section level3">
<h3>Fixed scales for better comparisons</h3>
<p>The default choice of the range of the axes is important. When not using <code>facet</code>, this range is determined by the data shown in the plot. When using <code>facet</code>, this range is determined by the data shown in all plots and therefore kept fixed across plots. This makes comparisons across plots much easier. For example, in the above plot, we can see that life expectancy has increased and the fertility has decreased across most countries. We see this because the cloud of points moves. This is not the case if we adjust the scales:</p>
<pre class="r"><code>filter(gapminder, year%in%c(1962, 2012)) %&gt;%
  ggplot(aes(fertility, life_expectancy, col = continent)) +
  geom_point() +
  facet_wrap(. ~ year, scales = &quot;free&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/facet-without-fixed-scales-1.png" width="672" /></p>
<p>In the plot above, we have to pay special attention to the range to notice that the plot on the right has a larger life expectancy.</p>
</div>
</div>
<div id="time-series-plots" class="section level2">
<h2>Time series plots</h2>
<p>The visualizations above effectively illustrate that data no longer supports the western versus developing world view. Once we see these plots, new questions emerge. For example, which countries are improving more and which ones less? Was the improvement constant during the last 50 years or was it more accelerated during certain periods? For a closer look that may help answer these questions, we introduce <em>time series plots</em>.</p>
<p>Time series plots have time in the x-axis and an outcome or measurement of interest on the y-axis. For example, here is a trend plot of United States fertility rates:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(country == &quot;United States&quot;) %&gt;%
  ggplot(aes(year, fertility)) +
  geom_point()</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-time-series-plot-points-1.png" width="672" /></p>
<p>We see that the trend is not linear at all. Instead there is sharp drop during the 1960s and 1970s to below 2. Then the trend comes back to 2 and stabilizes during the 1990s.</p>
<p>When the points are regularly and densely spaced, as they are here, we create curves by joining the points with lines, to convey that these data are from a single series, here a country. To do this, we use the <code>geom_line</code> function instead of <code>geom_point</code>.</p>
<pre class="r"><code>gapminder %&gt;%
  filter(country == &quot;United States&quot;) %&gt;%
  ggplot(aes(year, fertility)) +
  geom_line()</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-time-series-plot-curve-1.png" width="672" /></p>
<p>This is particularly helpful when we look at two countries. If we subset the data to include two countries, one from Europe and one from Asia, then adapt the code above:</p>
<pre class="r"><code>countries &lt;- c(&quot;South Korea&quot;,&quot;Germany&quot;)

gapminder %&gt;% filter(country %in% countries) %&gt;%
  ggplot(aes(year,fertility)) +
  geom_line()</code></pre>
<p><img src="/content/03-content_files/figure-html/wrong-time-series-plot-1.png" width="672" /></p>
<p>Unfortunately, this is <strong>not</strong> the plot that we want. Rather than a line for each country, the points for both countries are joined. This is actually expected since we have not told <code>ggplot</code> anything about wanting two separate lines. To let <code>ggplot</code> know that there are two curves that need to be made separately, we assign each point to a <code>group</code>, one for each country:</p>
<pre class="r"><code>countries &lt;- c(&quot;South Korea&quot;,&quot;Germany&quot;)

gapminder %&gt;% filter(country %in% countries &amp; !is.na(fertility)) %&gt;%
  ggplot(aes(year, fertility, group = country)) +
  geom_line()</code></pre>
<p><img src="/content/03-content_files/figure-html/time-series-two-curves-1.png" width="672" /></p>
<p>But which line goes with which country? We can assign colors to make this distinction.
A useful side-effect of using the <code>color</code> argument to assign different colors to the different countries is that the data is automatically grouped:</p>
<pre class="r"><code>countries &lt;- c(&quot;South Korea&quot;,&quot;Germany&quot;)

gapminder %&gt;% filter(country %in% countries &amp; !is.na(fertility)) %&gt;%
  ggplot(aes(year,fertility, col = country)) +
  geom_line()</code></pre>
<p><img src="/content/03-content_files/figure-html/fertility-time-series-plot-1.png" width="672" /></p>
<p>The plot clearly shows how South Korea’s fertility rate dropped drastically during the 1960s and 1970s, and by 1990 had a similar rate to that of Germany.</p>
<div id="labels-instead-of-legends" class="section level3">
<h3>Labels instead of legends</h3>
<p>For trend plots we recommend labeling the lines rather than using legends since the viewer can quickly see which line is which country. This suggestion actually applies to most plots: labeling is usually preferred over legends.</p>
<p>We demonstrate how we can do this using the life expectancy data. We define a data table with the label locations and then use a second mapping just for these labels:</p>
<pre class="r"><code>labels &lt;- data.frame(country = countries, x = c(1975,1965), y = c(60,72))

gapminder %&gt;%
  filter(country %in% countries) %&gt;%
  ggplot(aes(year, life_expectancy, col = country)) +
  geom_line() +
  geom_text(data = labels, aes(x, y, label = country), size = 5) +
  theme(legend.position = &quot;none&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/labels-better-than-legends-1.png" width="672" /></p>
<p>The plot clearly shows how an improvement in life expectancy followed the drops in fertility rates. In 1960, Germans lived 15 years longer than South Koreans, although by 2010 the gap is completely closed. It exemplifies the improvement that many non-western countries have achieved in the last 40 years.</p>
</div>
</div>
<div id="data-transformations" class="section level2">
<h2>Data transformations</h2>
<p>We now shift our attention to the second question related to the commonly held notion that wealth distribution across the world has become worse during the last decades. When general audiences are asked if poor countries have become poorer and rich countries become richer, the majority answers yes. By using stratification, histograms, smooth densities, and boxplots, we will be able to understand if this is in fact the case. First we learn how transformations can sometimes help provide more informative summaries and plots.</p>
<p>The <code>gapminder</code> data table includes a column with the countries’ gross domestic product (GDP). GDP measures the market value of goods and services produced by a country in a year. The GDP per person is often used as a rough summary of a country’s wealth. Here we divide this quantity by 365 to obtain the more interpretable measure <em>dollars per day</em>. Using current US dollars as a unit, a person surviving on an income of less than $2 a day is defined to be living in <em>absolute poverty</em>. We add this variable to the data table:</p>
<pre class="r"><code>gapminder &lt;- gapminder %&gt;%  mutate(dollars_per_day = gdp/population/365)</code></pre>
<p>The GDP values are adjusted for inflation and represent current US dollars, so these values are meant to be comparable across the years. Of course, these are country averages and within each country there is much variability. All the graphs and insights described below relate to country averages and not to individuals.</p>
<div id="log-transformation" class="section level3">
<h3>Log transformation</h3>
<p>Here is a histogram of per day incomes from 1970:</p>
<pre class="r"><code>past_year &lt;- 1970
gapminder %&gt;%
  filter(year == past_year &amp; !is.na(gdp)) %&gt;%
  ggplot(aes(dollars_per_day)) +
  geom_histogram(binwidth = 1, color = &quot;black&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/dollars-per-day-distribution-1.png" width="672" /></p>
<p>We use the <code>color = "black"</code> argument to draw a boundary and clearly distinguish the bins.</p>
<p>In this plot, we see that for the majority of countries, averages are below $10 a day.</p>
<p>However, the majority of the x-axis is dedicated to the <code>35</code> countries with averages above $10. So the plot is not very informative about countries with values below $10 a day.</p>
<p>It might be more informative to quickly be able to see how many countries have average daily incomes of about $1 (extremely poor), $2 (very poor), $4 (poor), $8 (middle), $16 (well off), $32 (rich), $64 (very rich) per day. These changes are multiplicative and log transformations convert multiplicative changes into additive ones: when using base 2, a doubling of a value turns into an increase by 1.</p>
<p>Here is the distribution if we apply a log base 2 transform:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year == past_year &amp; !is.na(gdp)) %&gt;%
  ggplot(aes(log2(dollars_per_day))) +
  geom_histogram(binwidth = 1, color = &quot;black&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/dollars-per-day-distribution-log-1.png" width="672" /></p>
<p>In a way this provides a <em>close-up</em> of the mid to lower income countries.</p>
</div>
<div id="which-base" class="section level3">
<h3>Which base?</h3>
<p>In the case above, we used base 2 in the log transformations. Other common choices are base <span class="math inline">\(\mathrm{e}\)</span> (the natural log) and base 10.</p>
<p>In general, we do not recommend using the natural log for data exploration and visualization. This is because while <span class="math inline">\(2^2, 2^3, 2^4, \dots\)</span> or <span class="math inline">\(10^2, 10^3, \dots\)</span> are easy to compute in our heads, the same is not true for <span class="math inline">\(\mathrm{e}^2, \mathrm{e}^3, \dots\)</span>, so the scale is not intuitive or easy to interpret.</p>
<p>In the dollars per day example, we used base 2 instead of base 10 because the resulting range is easier to interpret. The range of the values being plotted is 0.3269426, 48.8852142.</p>
<p>In base 10, this turns into a range that includes very few integers: just 0 and 1.
With base two, our range includes -2, -1, 0, 1, 2, 3, 4, and 5. It is easier to compute <span class="math inline">\(2^x\)</span> and <span class="math inline">\(10^x\)</span> when <span class="math inline">\(x\)</span> is an integer and between -10 and 10, so we prefer to have smaller integers in the scale. Another consequence of a limited range is that choosing the binwidth is more challenging. With log base 2, we know that a binwidth of 1 will translate to a bin with range <span class="math inline">\(x\)</span> to <span class="math inline">\(2x\)</span>.</p>
<p>For an example in which base 10 makes more sense, consider population sizes. A log base 10 is preferable since the range for these is:</p>
<pre class="r"><code>filter(gapminder, year == past_year) %&gt;%
  summarize(min = min(population), max = max(population))</code></pre>
<pre><code>##     min       max
## 1 46075 808510713</code></pre>
<p>Here is the histogram of the transformed values:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year == past_year) %&gt;%
  ggplot(aes(log10(population))) +
  geom_histogram(binwidth = 0.5, color = &quot;black&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/population-histogram-log10-1.png" width="672" /></p>
<p>In the above, we quickly see that country populations range between ten thousand and ten billion.</p>
</div>
<div id="transform-the-values-or-the-scale" class="section level3">
<h3>Transform the values or the scale?</h3>
<p>There are two ways we can use log transformations in plots. We can log the values before plotting them or use log scales in the axes. Both approaches are useful and have different strengths. If we log the data, we can more easily interpret intermediate values in the scale. For example, if we see:</p>
<p><code>----1----x----2--------3----</code></p>
<p>for log transformed data, we know that the value of <span class="math inline">\(x\)</span> is about 1.5. If the scales are logged:</p>
<p><code>----1----x----10------100---</code></p>
<p>then, to determine <code>x</code>, we need to compute <span class="math inline">\(10^{1.5}\)</span>, which is not easy to do in our heads. The advantage of using logged scales is that we see the original values on the axes. However, the advantage of showing logged scales is that the original values are displayed in the plot, which are easier to interpret. For example, we would see “32 dollars a day” instead of “5 log base 2 dollars a day”.</p>
<p>As we learned earlier, if we want to scale the axis with logs, we can use the <code>scale_x_continuous</code> function. Instead of logging the values first, we apply this layer:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year == past_year &amp; !is.na(gdp)) %&gt;%
  ggplot(aes(dollars_per_day)) +
  geom_histogram(binwidth = 1, color = &quot;black&quot;) +
  scale_x_continuous(trans = &quot;log2&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/dollars-per-day-log-scale-1.png" width="672" /></p>
<p>Note that the log base 10 transformation has its own function: <code>scale_x_log10()</code>, but currently base 2 does not, although we could easily define our own.</p>
<p>There are other transformations available through the <code>trans</code> argument. As we learn later on, the square root (<code>sqrt</code>) transformation is useful when considering counts. The logistic transformation (<code>logit</code>) is useful when plotting proportions between 0 and 1. The <code>reverse</code> transformation is useful when we want smaller values to be on the right or on top.</p>
</div>
</div>
<div id="visualizing-multimodal-distributions" class="section level2">
<h2>Visualizing multimodal distributions</h2>
<p>In the histogram above we see two <em>bumps</em>: one at about 4 and another at about 32. In statistics these bumps are sometimes referred to as <em>modes</em>. The mode of a distribution is the value with the highest frequency. The mode of the normal distribution is the average. When a distribution, like the one above, doesn’t monotonically decrease from the mode, we call the locations where it goes up and down again <em>local modes</em> and say that the distribution has <em>multiple modes</em>.</p>
<p>The histogram above suggests that the 1970 country income distribution has two modes: one at about 2 dollars per day (1 in the log 2 scale) and another at about 32 dollars per day (5 in the log 2 scale). This <em>bimodality</em> is consistent with a dichotomous world made up of countries with average incomes less than $8 (3 in the log 2 scale) a day and countries above that.</p>
</div>
<div id="comparing-multiple-distributions-with-boxplots-and-ridge-plots" class="section level2">
<h2>Comparing multiple distributions with boxplots and ridge plots</h2>
<p>A histogram showed us that the 1970 income distribution values show a dichotomy. However, the histogram does not show us if the two groups of countries are <em>west</em> versus the <em>developing</em> world.</p>
<p>Let’s start by quickly examining the data by region. We reorder the regions by the median value and use a log scale.</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year == past_year &amp; !is.na(gdp)) %&gt;%
  mutate(region = reorder(region, dollars_per_day, FUN = median)) %&gt;%
  ggplot(aes(dollars_per_day, region)) +
  geom_point() +
  scale_x_continuous(trans = &quot;log2&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>We can already see that there is indeed a “west versus the rest” dichotomy: we see two clear groups, with the rich group composed of North America, Northern and Western Europe, New Zealand and Australia. We define groups based on this observation:</p>
<pre class="r"><code>gapminder &lt;- gapminder %&gt;%
  mutate(group = case_when(
    region %in% c(&quot;Western Europe&quot;, &quot;Northern Europe&quot;,&quot;Southern Europe&quot;,
                    &quot;Northern America&quot;,
                  &quot;Australia and New Zealand&quot;) ~ &quot;West&quot;,
    region %in% c(&quot;Eastern Asia&quot;, &quot;South-Eastern Asia&quot;) ~ &quot;East Asia&quot;,
    region %in% c(&quot;Caribbean&quot;, &quot;Central America&quot;,
                  &quot;South America&quot;) ~ &quot;Latin America&quot;,
    continent == &quot;Africa&quot; &amp;
      region != &quot;Northern Africa&quot; ~ &quot;Sub-Saharan&quot;,
    TRUE ~ &quot;Others&quot;))</code></pre>
<p>We turn this <code>group</code> variable into a factor to control the order of the levels:</p>
<pre class="r"><code>gapminder &lt;- gapminder %&gt;%
  mutate(group = factor(group, levels = c(&quot;Others&quot;, &quot;Latin America&quot;,
                                          &quot;East Asia&quot;, &quot;Sub-Saharan&quot;,
                                          &quot;West&quot;)))</code></pre>
<p>In the next section we demonstrate how to visualize and compare distributions across groups.</p>
<div id="boxplots" class="section level3">
<h3>Boxplots</h3>
<p>The exploratory data analysis above has revealed two characteristics about average income distribution in 1970. Using a histogram, we found a bimodal distribution with the modes relating to poor and rich countries. We now want to compare the distribution across these five groups to confirm the “west versus the rest” dichotomy. The number of points in each category is large enough that a summary plot may be useful. We could generate five histograms or five density plots, but it may be more practical to have all the visual summaries in one plot. We therefore start by stacking boxplots next to each other. Note that we add the layer <code>theme(axis.text.x = element_text(angle = 90, hjust = 1))</code> to turn the group labels vertical, since they do not fit if we show them horizontally, and remove the axis label to make space.</p>
<pre class="r"><code>p &lt;- gapminder %&gt;%
  filter(year == past_year &amp; !is.na(gdp)) %&gt;%
  ggplot(aes(group, dollars_per_day)) +
  geom_boxplot() +
  scale_y_continuous(trans = &quot;log2&quot;) +
  xlab(&quot;&quot;) +
  theme(axis.text.x = element_text(angle = 90, hjust = 1))
p</code></pre>
<p><img src="/content/03-content_files/figure-html/dollars-per-day-boxplot-1.png" width="672" /></p>
<p>Boxplots have the limitation that by summarizing the data into five numbers, we might miss important characteristics of the data. One way to avoid this is by showing the data.</p>
<pre class="r"><code>p + geom_point(alpha = 0.5)</code></pre>
<p><img src="/content/03-content_files/figure-html/dollars-per-day-boxplot-with-data-1.png" width="672" /></p>
</div>
<div id="ridge-plots" class="section level3">
<h3>Ridge plots</h3>
<p>Showing each individual point does not always reveal important characteristics of the distribution. Although not the case here, when the number of data points is so large that there is over-plotting, showing the data can be counterproductive. Boxplots help with this by providing a five-number summary, but this has limitations too. For example, boxplots will not permit us to discover bimodal distributions. To see this, note that the two plots below are summarizing the same dataset:</p>
<p><img src="/content/03-content_files/figure-html/boxplot-dont-show-bimodal-1.png" width="100%" /></p>
<p>In cases in which we are concerned that the boxplot summary is too simplistic, we can show stacked smooth densities or histograms. We refer to these as <em>ridge plots</em>. Because we are used to visualizing densities with values in the x-axis, we stack them vertically. Also, because more space is needed in this approach, it is convenient to overlay them. The package <strong>ggridges</strong> provides a convenient function for doing this. Here is the income data shown above with boxplots but with a <em>ridge plot</em>.</p>
<pre class="r"><code>library(ggridges)
p &lt;- gapminder %&gt;%
  filter(year == past_year &amp; !is.na(dollars_per_day)) %&gt;%
  ggplot(aes(dollars_per_day, group)) +
  scale_x_continuous(trans = &quot;log2&quot;)
p  + geom_density_ridges()</code></pre>
<p><img src="/content/03-content_files/figure-html/ridge-plot-1.png" width="672" /></p>
<p>Note that we have to invert the <code>x</code> and <code>y</code> used for the boxplot. A useful <code>geom_density_ridges</code> parameter is <code>scale</code>, which lets you determine the amount of overlap, with <code>scale = 1</code> meaning no overlap and larger values resulting in more overlap.</p>
<p>If the number of data points is small enough, we can add them to the ridge plot using the following code:</p>
<pre class="r"><code>p + geom_density_ridges(jittered_points = TRUE)</code></pre>
<p><img src="/content/03-content_files/figure-html/ridge-plot-with-points-1.png" width="672" /></p>
<p>By default, the height of the points is jittered and should not be interpreted in any way. To show data points, but without using jitter we can use the following code to add what is referred to as a <em>rug representation</em> of the data.</p>
<pre class="r"><code>p + geom_density_ridges(jittered_points = TRUE,
                        position = position_points_jitter(height = 0),
                        point_shape = &#39;|&#39;, point_size = 3,
                        point_alpha = 1, alpha = 0.7)</code></pre>
<p><img src="/content/03-content_files/figure-html/ridge-plot-with-rug-1.png" width="672" /></p>
</div>
<div id="example-1970-versus-2010-income-distributions" class="section level3">
<h3>Example: 1970 versus 2010 income distributions</h3>
<p>Data exploration clearly shows that in 1970 there was a “west versus the rest” dichotomy. But does this dichotomy persist? Let’s use <code>facet_grid</code> see how the distributions have changed. To start, we will focus on two groups: the west and the rest. We make four histograms.</p>
<pre class="r"><code>past_year &lt;- 1970
present_year &lt;- 2010
years &lt;- c(past_year, present_year)
gapminder %&gt;%
  filter(year %in% years &amp; !is.na(gdp)) %&gt;%
  mutate(west = ifelse(group == &quot;West&quot;, &quot;West&quot;, &quot;Developing&quot;)) %&gt;%
  ggplot(aes(dollars_per_day)) +
  geom_histogram(binwidth = 1, color = &quot;black&quot;) +
  scale_x_continuous(trans = &quot;log2&quot;) +
  facet_grid(year ~ west)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-hist-west-v-developing-two-years-1.png" width="672" /></p>
<p>Before we interpret the findings of this plot, we notice that there are more countries represented in the 2010 histograms than in 1970: the total counts are larger. One reason for this is that several countries were founded after 1970. For example, the Soviet Union divided into several countries during the 1990s. Another reason is that data was available for more countries in 2010.</p>
<p>We remake the plots using only countries with data available for both years. In the data wrangling part of this class (after Thanksgiving), we will learn <strong>tidyverse</strong> tools that permit us to write efficient code for this, but here we can use simple code using the <code>intersect</code> function:</p>
<pre class="r"><code>country_list_1 &lt;- gapminder %&gt;%
  filter(year == past_year &amp; !is.na(dollars_per_day)) %&gt;%
  pull(country)

country_list_2 &lt;- gapminder %&gt;%
  filter(year == present_year &amp; !is.na(dollars_per_day)) %&gt;%
  pull(country)

country_list &lt;- intersect(country_list_1, country_list_2)</code></pre>
<p>These 108 account for
86% of the world population, so this subset should be representative.</p>
<p>Let’s remake the plot, but only for this subset by simply adding <code>country %in% country_list</code> to the <code>filter</code> function:</p>
<p><img src="/content/03-content_files/figure-html/income-histogram-west-v-devel-1.png" width="672" /></p>
<p>We now see that the rich countries have become a bit richer, but percentage-wise, the poor countries appear to have improved more. In particular, we see that the proportion of <em>developing</em> countries earning more than $16 a day increased substantially.</p>
<p>To see which specific regions improved the most, we can remake the boxplots we made above, but now adding the year 2010 and then using facet to compare the two years.</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year %in% years &amp; country %in% country_list) %&gt;%
  ggplot(aes(group, dollars_per_day)) +
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_y_continuous(trans = &quot;log2&quot;) +
  xlab(&quot;&quot;) +
  facet_grid(. ~ year)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-histogram-by-region-1.png" width="100%" /></p>
<p>Here, we pause to introduce another powerful <strong>ggplot2</strong> feature. Because we want to compare each region before and after, it would be convenient to have the 1970 boxplot next to the 2010 boxplot for each region. In general, comparisons are easier when data are plotted next to each other.</p>
<p>So instead of faceting, we keep the data from each year together and ask to color (or fill) them depending on the year. Note that groups are automatically separated by year and each pair of boxplots drawn next to each other. Because year is a number, we turn it into a factor since <strong>ggplot2</strong> automatically assigns a color to each category of a factor. Note that we have to convert the year columns from numeric to factor.</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year %in% years &amp; country %in% country_list) %&gt;%
  mutate(year = factor(year)) %&gt;%
  ggplot(aes(group, dollars_per_day, fill = year)) +
  geom_boxplot() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1)) +
  scale_y_continuous(trans = &quot;log2&quot;) +
  xlab(&quot;&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-histogram-west-v-devel-by-year-1.png" width="672" /></p>
<p>Finally, we point out that if what we are most interested in is comparing before and after values, it might make more sense to plot the percentage increases. We are still not ready to learn to code this, but here is what the plot would look like:</p>
<p><img src="/content/03-content_files/figure-html/income-west-v-devel-before-after-ratio-1.png" width="672" /></p>
<p>The previous data exploration suggested that the income gap between rich and poor countries has narrowed considerably during the last 40 years.
We used a series of histograms and boxplots to see this. We suggest a succinct way to convey this message with just one plot.</p>
<p>Let’s start by noting that density plots for income distribution in 1970 and 2010 deliver the message that the gap is closing:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year %in% years &amp; country %in% country_list) %&gt;%
  ggplot(aes(dollars_per_day)) +
  geom_density(fill = &quot;grey&quot;) +
  scale_x_continuous(trans = &quot;log2&quot;) +
  facet_grid(. ~ year)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-smooth-density-by-year-1.png" width="100%" /></p>
<p>In the 1970 plot, we see two clear modes: poor and rich countries. In 2010, it appears that some of the poor countries have shifted towards the right, closing the gap.</p>
<p>The next message we need to convey is that the reason for this change in distribution is that several poor countries became richer, rather than some rich countries becoming poorer. To do this, we can assign a color to the groups we identified during data exploration.</p>
<p>However, we first need to learn how to make these smooth densities in a way that preserves information on the number of countries in each group. To understand why we need this, note the discrepancy in the size of each group:</p>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<table class="table table-striped" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:right;">
Developing
</th>
<th style="text-align:right;">
West
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
87
</td>
<td style="text-align:right;">
21
</td>
</tr>
</tbody>
</table>
<p>But when we overlay two densities, the default is to have the area represented by each distribution add up to 1, regardless of the size of each group:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year %in% years &amp; country %in% country_list) %&gt;%
  mutate(group = ifelse(group == &quot;West&quot;, &quot;West&quot;, &quot;Developing&quot;)) %&gt;%
  ggplot(aes(dollars_per_day, fill = group)) +
  scale_x_continuous(trans = &quot;log2&quot;) +
  geom_density(alpha = 0.2) +
  facet_grid(year ~ .)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-smooth-density-by-year-west-v-developing-1.png" width="672" /></p>
<p>This makes it appear as if there are the same number of countries in each group. To change this, we will need to learn to access computed variables with <code>geom_density</code> function.</p>
</div>
<div id="accessing-computed-variables" class="section level3">
<h3>Accessing computed variables</h3>
<p>To have the areas of these densities be proportional to the size of the groups, we can simply multiply the y-axis values by the size of the group. From the <code>geom_density</code> help file, we see that the functions compute a variable called <code>count</code> that does exactly this. We want this variable to be on the y-axis rather than the density.</p>
<p>In <strong>ggplot2</strong>, we access these variables by surrounding the name with two dots. We will therefore use the following mapping:</p>
<pre class="r"><code>aes(x = dollars_per_day, y = ..count..)</code></pre>
<p>We can now create the desired plot by simply changing the mapping in the previous code chunk. We will also expand the limits of the x-axis.</p>
<pre class="r"><code>p &lt;- gapminder %&gt;%
  filter(year %in% years &amp; country %in% country_list) %&gt;%
  mutate(group = ifelse(group == &quot;West&quot;, &quot;West&quot;, &quot;Developing&quot;)) %&gt;%
  ggplot(aes(dollars_per_day, y = ..count.., fill = group)) +
  scale_x_continuous(trans = &quot;log2&quot;, limit = c(0.125, 300))

p + geom_density(alpha = 0.2) +
  facet_grid(year ~ .)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-smooth-density-counts-1.png" width="672" /></p>
<p>If we want the densities to be smoother, we use the <code>bw</code> argument so that the same bandwidth is used in each density. We selected 0.75 after trying out several values.</p>
<pre class="r"><code>p + geom_density(alpha = 0.2, bw = 0.75) + facet_grid(year ~ .)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-smooth-density-counts-by-year-1.png" width="672" /></p>
<p>This plot now shows what is happening very clearly. The developing world distribution is changing. A third mode appears consisting of the countries that most narrowed the gap.</p>
<p>To visualize if any of the groups defined above are driving this we can quickly make a ridge plot:</p>
<pre class="r"><code>gapminder %&gt;%
  filter(year %in% years &amp; !is.na(dollars_per_day)) %&gt;%
  ggplot(aes(dollars_per_day, group)) +
  scale_x_continuous(trans = &quot;log2&quot;) +
  geom_density_ridges(adjust = 1.5) +
  facet_grid(. ~ year)</code></pre>
<p><img src="/content/03-content_files/figure-html/ridge-plot-income-five-regions-1.png" width="672" /></p>
<p>Another way to achieve this is by stacking the densities on top of each other:</p>
<pre class="r"><code>gapminder %&gt;%
    filter(year %in% years &amp; country %in% country_list) %&gt;%
  group_by(year) %&gt;%
  mutate(weight = population/sum(population)*2) %&gt;%
  ungroup() %&gt;%
  ggplot(aes(dollars_per_day, fill = group)) +
  scale_x_continuous(trans = &quot;log2&quot;, limit = c(0.125, 300)) +
  geom_density(alpha = 0.2, bw = 0.75, position = &quot;stack&quot;) +
  facet_grid(year ~ .)</code></pre>
<p><img src="/content/03-content_files/figure-html/income-smooth-density-counts-by-region-and-year-1.png" width="672" /></p>
<p>Here we can clearly see how the distributions for East Asia, Latin America, and others shift markedly to the right. While Sub-Saharan Africa remains stagnant.</p>
<p>Notice that we order the levels of the group so that the West’s density is plotted first, then Sub-Saharan Africa. Having the two extremes plotted first allows us to see the remaining bimodality better.</p>
</div>
<div id="weighted-densities" class="section level3">
<h3>Weighted densities</h3>
<p>As a final point, we note that these distributions weigh every country the same. So if most of the population is improving, but living in a very large country, such as China, we might not appreciate this. We can actually weight the smooth densities using the <code>weight</code> mapping argument. The plot then looks like this:</p>
<p><img src="/content/03-content_files/figure-html/income-smooth-density-counts-by-region-year-weighted-1.png" width="672" /></p>
<p>This particular figure shows very clearly how the income distribution gap is closing with most of the poor remaining in Sub-Saharan Africa.</p>
</div>
</div>
<div id="the-ecological-fallacy-and-importance-of-showing-the-data" class="section level2">
<h2>The ecological fallacy and importance of showing the data</h2>
<p>Throughout this section, we have been comparing regions of the world. We have seen that, on average, some regions do better than others. In this section, we focus on describing the importance of variability within the groups when examining the relationship between a country’s infant mortality rates and average income.</p>
<p>We define a few more regions and compare the averages across regions:</p>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<p><img src="/content/03-content_files/figure-html/ecological-fallacy-averages-1.png" width="672" /></p>
<p>The relationship between these two variables is almost perfectly linear and the graph shows a dramatic difference. While in the West less than 0.5% of infants die, in Sub-Saharan Africa the rate is higher than 6%!</p>
<p>Note that the plot uses a new transformation, the logistic transformation.</p>
<div id="logit" class="section level3">
<h3>Logistic transformation</h3>
<p>The logistic or logit transformation for a proportion or rate <span class="math inline">\(p\)</span> is defined as:</p>
<p><span class="math display">\[f(p) = \log \left( \frac{p}{1-p} \right)\]</span></p>
<p>When <span class="math inline">\(p\)</span> is a proportion or probability, the quantity that is being logged, <span class="math inline">\(p/(1-p)\)</span>, is called the <em>odds</em>. In this case <span class="math inline">\(p\)</span> is the proportion of infants that survived. The odds tell us how many more infants are expected to survive than to die. The log transformation makes this symmetric. If the rates are the same, then the log odds is 0. Fold increases or decreases turn into positive and negative increments, respectively.</p>
<p>This scale is useful when we want to highlight differences near 0 or 1. For survival rates this is important because a survival rate of 90% is unacceptable, while a survival of 99% is relatively good. We would much prefer a survival rate closer to 99.9%. We want our scale to highlight these difference and the logit does this. Note that 99.9/0.1 is about 10 times bigger than 99/1 which is about 10 times larger than 90/10. By using the log, these fold changes turn into constant increases.</p>
</div>
<div id="show-the-data" class="section level3">
<h3>Show the data</h3>
<p>Now, back to our plot. Based on the plot above, do we conclude that a country with a low income is destined to have low survival rate? Do we conclude that survival rates in Sub-Saharan Africa are all lower than in Southern Asia, which in turn are lower than in the Pacific Islands, and so on?</p>
<p>Jumping to this conclusion based on a plot showing averages is referred to as the <em>ecological fallacy</em>. The almost perfect relationship between survival rates and income is only observed for the averages at the region level. Once we show all the data, we see a somewhat more complicated story:</p>
<p><img src="/content/03-content_files/figure-html/ecological-fallacy-all-data-1.png" width="672" /></p>
<p>Specifically, we see that there is a large amount of variability. We see that countries from the same regions can be quite different and that countries with the same income can have different survival rates. For example, while on average Sub-Saharan Africa had the worse health and economic outcomes, there is wide variability within that group. Mauritius and Botswana are doing better than Angola and Sierra Leone, with Mauritius comparable to Western countries.</p>
</div>
</div>
<div id="vaccines" class="section level2">
<h2>Case study: vaccines and infectious diseases</h2>
<p>Vaccines have helped save millions of lives. In the 19th century, before herd immunization was achieved through vaccination programs, deaths from infectious diseases, such as smallpox and polio, were common. However, today vaccination programs have become somewhat controversial despite all the scientific evidence for their importance.</p>
<p>The controversy started with a paper<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a> published in 1988 and led by Andrew Wakefield claiming
there was a link between the administration of the measles, mumps, and rubella (MMR) vaccine and the appearance of autism and bowel disease.
Despite much scientific evidence contradicting this finding, sensationalist media reports and fear-mongering from conspiracy theorists led parts of the public into believing that vaccines were harmful. As a result, many parents ceased to vaccinate their children. This dangerous practice can be potentially disastrous given that the Centers for Disease Control (CDC) estimates that vaccinations will prevent more than 21 million hospitalizations and 732,000 deaths among children born in the last 20 years (see Benefits from Immunization during the Vaccines for Children Program Era — United States, 1994-2013, MMWR<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>).
The 1988 paper has since been retracted and Andrew Wakefield was eventually “struck off the UK medical register, with a statement identifying deliberate falsification in the research published in The Lancet, and was thereby barred from practicing medicine in the UK.” (source: Wikipedia<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a>). Yet misconceptions persist, in part due to self-proclaimed activists who continue to disseminate misinformation about vaccines.</p>
<p>Effective communication of data is a strong antidote to misinformation and fear-mongering. Earlier we used an example provided by a Wall Street Journal article<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a> showing data related to the impact of vaccines on battling infectious diseases. Here we reconstruct that example.</p>
<p>The data used for these plots were collected, organized, and distributed by the Tycho Project<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. They include weekly reported counts for seven diseases from 1928 to 2011, from all fifty states. The yearly totals are helpfully included in the <strong>dslabs</strong> package:</p>
<pre class="r"><code>library(tidyverse)
library(RColorBrewer)
library(dslabs)
data(us_contagious_diseases)
names(us_contagious_diseases)</code></pre>
<pre><code>## [1] &quot;disease&quot;         &quot;state&quot;           &quot;year&quot;            &quot;weeks_reporting&quot;
## [5] &quot;count&quot;           &quot;population&quot;</code></pre>
<p>We create a temporary object <code>dat</code> that stores only the measles data, includes a per 100,000 rate, orders states by average value of disease and removes Alaska and Hawaii since they only became states in the late 1950s. Note that there is a <code>weeks_reporting</code> column that tells us for how many weeks of the year data was reported. We have to adjust for that value when computing the rate.</p>
<pre class="r"><code>the_disease &lt;- &quot;Measles&quot;
dat &lt;- us_contagious_diseases %&gt;%
  filter(!state%in%c(&quot;Hawaii&quot;,&quot;Alaska&quot;) &amp; disease == the_disease) %&gt;%
  mutate(rate = count / population * 10000 * 52 / weeks_reporting) %&gt;%
  mutate(state = reorder(state, rate))</code></pre>
<p>We can now easily plot disease rates per year. Here are the measles data from California:</p>
<pre class="r"><code>dat %&gt;% filter(state == &quot;California&quot; &amp; !is.na(rate)) %&gt;%
  ggplot(aes(year, rate)) +
  geom_line() +
  ylab(&quot;Cases per 10,000&quot;)  +
  geom_vline(xintercept=1963, col = &quot;blue&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/california-measles-time-series-1.png" width="672" /></p>
<p>We add a vertical line at 1963 since this is when the vaccine was introduced [Control, Centers for Disease; Prevention (2014). CDC health information for international travel 2014 (the yellow book). p. 250. ISBN 9780199948505].</p>
<p>Now can we show data for all states in one plot? We have three variables to show: year, state, and rate. In the WSJ figure, they use the x-axis for year, the y-axis for state, and color hue to represent rates. However, the color scale they use, which goes from yellow to blue to green to orange to red, can be improved.</p>
<p>In our example, we want to use a sequential palette since there is no meaningful center, just low and high rates.</p>
<p>We use the geometry <code>geom_tile</code> to tile the region with colors representing disease rates. We use a square root transformation to avoid having the really high counts dominate the plot. Notice that missing values are shown in grey. Note that once a disease was pretty much eradicated, some states stopped reporting cases all together. This is why we see so much grey after 1980.</p>
<pre class="r"><code>dat %&gt;% ggplot(aes(year, state, fill = rate)) +
  geom_tile(color = &quot;grey50&quot;) +
  scale_x_continuous(expand=c(0,0)) +
  scale_fill_gradientn(colors = brewer.pal(9, &quot;Reds&quot;), trans = &quot;sqrt&quot;) +
  geom_vline(xintercept=1963, col = &quot;blue&quot;) +
  theme_minimal() +
  theme(panel.grid = element_blank(),
        legend.position=&quot;bottom&quot;,
        text = element_text(size = 8)) +
  ggtitle(the_disease) +
  ylab(&quot;&quot;) + xlab(&quot;&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/vaccines-plot-1.png" width="100%" /></p>
<p>This plot makes a very striking argument for the contribution of vaccines. However, one limitation of this plot is that it uses color to represent quantity, which we earlier explained makes it harder to know exactly how high values are going. Position and lengths are better cues. If we are willing to lose state information, we can make a version of the plot that shows the values with position. We can also show the average for the US, which we compute like this:</p>
<pre class="r"><code>avg &lt;- us_contagious_diseases %&gt;%
  filter(disease==the_disease) %&gt;% group_by(year) %&gt;%
  summarize(us_rate = sum(count, na.rm = TRUE) /
              sum(population, na.rm = TRUE) * 10000)</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<p>Now to make the plot we simply use the <code>geom_line</code> geometry:</p>
<pre class="r"><code>dat %&gt;%
  filter(!is.na(rate)) %&gt;%
    ggplot() +
  geom_line(aes(year, rate, group = state),  color = &quot;grey50&quot;,
            show.legend = FALSE, alpha = 0.2, size = 1) +
  geom_line(mapping = aes(year, us_rate),  data = avg, size = 1) +
  scale_y_continuous(trans = &quot;sqrt&quot;, breaks = c(5, 25, 125, 300)) +
  ggtitle(&quot;Cases per 10,000 by state&quot;) +
  xlab(&quot;&quot;) + ylab(&quot;&quot;) +
  geom_text(data = data.frame(x = 1955, y = 50),
            mapping = aes(x, y, label=&quot;US average&quot;),
            color=&quot;black&quot;) +
  geom_vline(xintercept=1963, col = &quot;blue&quot;)</code></pre>
<p><img src="/content/03-content_files/figure-html/time-series-vaccines-plot-1.png" width="672" /></p>
<p>In theory, we could use color to represent the categorical value state, but it is hard to pick 50 distinct colors.</p>
<div class="fyi">
<p><strong>TRY IT</strong></p>
<ol style="list-style-type: decimal">
<li><p>Reproduce the image plot we previously made but for smallpox. For this plot, do not include years in which cases were not reported in 10 or more weeks.</p></li>
<li><p>Now reproduce the time series plot we previously made, but this time following the instructions of the previous question for smallpox.</p></li>
<li><p>For the state of California, make a time series plot showing rates for all diseases. Include only years with 10 or more weeks reporting. Use a different color for each disease.</p></li>
<li><p>Now do the same for the rates for the US. Hint: compute the US rate by using summarize: the total divided by total population.</p></li>
</ol>
</div>
</div>
</div>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p><a href="https://en.wikipedia.org/wiki/Hans_Rosling" class="uri">https://en.wikipedia.org/wiki/Hans_Rosling</a><a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p><a href="http://www.gapminder.org/" class="uri">http://www.gapminder.org/</a><a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p><a href="https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en" class="uri">https://www.ted.com/talks/hans_rosling_reveals_new_insights_on_poverty?language=en</a><a href="#fnref3" class="footnote-back">↩︎</a></p></li>
<li id="fn4"><p><a href="https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen" class="uri">https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen</a><a href="#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p><a href="http://www.thelancet.com/journals/lancet/article/PIIS0140-6736(97)11096-0/abstract" class="uri">http://www.thelancet.com/journals/lancet/article/PIIS0140-6736(97)11096-0/abstract</a><a href="#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p><a href="https://www.cdc.gov/mmwr/preview/mmwrhtml/mm6316a4.htm" class="uri">https://www.cdc.gov/mmwr/preview/mmwrhtml/mm6316a4.htm</a><a href="#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p><a href="https://en.wikipedia.org/wiki/Andrew_Wakefield" class="uri">https://en.wikipedia.org/wiki/Andrew_Wakefield</a><a href="#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p><a href="http://graphics.wsj.com/infectious-diseases-and-vaccines/" class="uri">http://graphics.wsj.com/infectious-diseases-and-vaccines/</a><a href="#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p><a href="http://www.tycho.pitt.edu/" class="uri">http://www.tycho.pitt.edu/</a><a href="#fnref9" class="footnote-back">↩︎</a></p></li>
</ol>
</div>

                    </div>

                    



                    
                </div>

                <div class="body-footer">
                    <p>Last updated on September 22, 2020</p>

                    


                    

                </div>

            </article>

            <footer>
    <hr>

    <div class="row course-info">
        <div class="col-md-7">
            <p>
                <strong>SSC 442: Data Analytics (Fall Semester 2020)</strong><br>

                <a href="https://www.msu.edu" target="_blank" rel="noopener">Michigan State University</a> &emsp;&emsp;
                <a href="https://socialscience.msu.edu/" target="_blank" rel="noopener">College of Social Science</a>
            </p>

            <p>
                <a href="https://www.benbushong.com" target="_blank" rel="noopener"><i class="fas fa-user"></i>
                    Prof. Ben Bushong</a> &emsp;&emsp;
                <a href="mailto:bbushong@msu.edu"><i class="fas fa-envelope"></i>
                    bbushong@msu.edu</a>
            </p>

            <p>
                <i class="far fa-calendar-alt"></i> Tuesday and Thursday &emsp;&emsp;
                <i class="far fa-clock"></i> 10:20 - 11:40 AM 
                
            </p>
        </div>

        <div class="col-md-5 credits">
            <p>All content licensed under a <a href="https://creativecommons.org/licenses/by-nc-nd/4.0/" target="_blank" rel="noopener">Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International License</a>.</p>
            
            <p>Content <i class="fab fa-creative-commons"></i> 2020 <a href="https://www.benbushong.com" target="_blank" rel="noopener">Ben Bushong</a></p>
        
            <p>This site created with the <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> in <a href="https://bookdown.org/yihui/blogdown/" target="_blank" rel="noopener">blogdown</a> and <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a>. </p>
            
            <p><a href="https://github.com/" target="_blank" rel="noopener"><i class="fab fa-github"></i> View the source at GitHub.</a></p>
        </div>
    </div>
</footer>


        </main>
    </div>
</div>

        

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/languages/r.min.js"></script>
        
      

    

    
    

    
    
    <script>const code_highlighting = true;</script>
    

    
    
    <script>const isSiteThemeDark = false;</script>
    

    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.1.1/anchor.min.js" integrity="sha256-pB/deHc9CGfFpJRjC43imB29Rse8tak+5eXqntO94ck=" crossorigin="anonymous"></script>
    <script>
      anchors.add();
    </script>
    

    

    
    

    
    

    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    <script src="/js/academic.min.6f7ce8be710290b8c431bbc97f405d15.js"></script>

    



    
    

    
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>

</html>
